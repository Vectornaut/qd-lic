!function(){return function e(t,n,r){function i(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}}()({1:[function(e,t,n){(function(n){(function(){"use strict";var r=e("object-assign");function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function o(e){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=e("util/"),u=Object.prototype.hasOwnProperty,s=Array.prototype.slice,f="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function l(e){return!o(e)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var p=t.exports=b,h=/\s*function\s+([^\(\s]*)\s*/;function d(e){if(a.isFunction(e)){if(f)return e.name;var t=e.toString().match(h);return t&&t[1]}}function g(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(f||!a.isFunction(e))return a.inspect(e);var t=d(e);return"[Function"+(t?": "+t:"")+"]"}function v(e,t,n,r,i){throw new p.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function b(e,t){e||v(e,!0,t,"==",p.ok)}function y(e,t,n,r){if(e===t)return!0;if(o(e)&&o(t))return 0===i(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;var u=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=w(e),o=w(t);if(i&&!o||!i&&o)return!1;if(i)return e=s.call(e),t=s.call(t),y(e,t,n);var u,f,c=A(e),l=A(t);if(c.length!==l.length)return!1;for(c.sort(),l.sort(),f=c.length-1;f>=0;f--)if(c[f]!==l[f])return!1;for(f=c.length-1;f>=0;f--)if(u=c[f],!y(e[u],t[u],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function x(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&v(i,n,"Missing expected exception"+r);var o="string"==typeof r,u=!e&&i&&!n;if((!e&&a.isError(i)&&o&&x(i,n)||u)&&v(i,n,"Got unwanted exception"+r),e&&i&&n&&!x(i,n)||!e&&i)throw i}p.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=g(m((t=this).actual),128)+" "+t.operator+" "+g(m(t.expected),128),this.generatedMessage=!0);var n=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,o=d(n),a=i.indexOf("\n"+o);if(a>=0){var u=i.indexOf("\n",a+1);i=i.substring(u+1)}this.stack=i}}},a.inherits(p.AssertionError,Error),p.fail=v,p.ok=b,p.equal=function(e,t,n){e!=t&&v(e,t,n,"==",p.equal)},p.notEqual=function(e,t,n){e==t&&v(e,t,n,"!=",p.notEqual)},p.deepEqual=function(e,t,n){y(e,t,!1)||v(e,t,n,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(e,t,n){y(e,t,!0)||v(e,t,n,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(e,t,n){y(e,t,!1)&&v(e,t,n,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function e(t,n,r){y(t,n,!0)&&v(t,n,r,"notDeepStrictEqual",e)},p.strictEqual=function(e,t,n){e!==t&&v(e,t,n,"===",p.strictEqual)},p.notStrictEqual=function(e,t,n){e===t&&v(e,t,n,"!==",p.notStrictEqual)},p.throws=function(e,t,n){_(!0,e,t,n)},p.doesNotThrow=function(e,t,n){_(!1,e,t,n)},p.ifError=function(e){if(e)throw e},p.strict=r(function e(t,n){t||v(t,!0,n,"==",e)},p,{equal:p.strictEqual,deepEqual:p.deepStrictEqual,notEqual:p.notStrictEqual,notDeepEqual:p.notDeepStrictEqual}),p.strict.strict=p.strict;var A=Object.keys||function(e){var t=[];for(var n in e)u.call(e,n)&&t.push(n);return t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":49,"util/":4}],2:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],3:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],4:[function(e,t,n){(function(t,r){(function(){var i=/%[sdj%]/g;n.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])g(s)||!w(s)?a+=" "+s:a+=" "+u(s);return a},n.deprecate=function(e,i){if(b(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var o,a={};function u(e,t){var r={seen:[],stylize:f};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(t)?r.showHidden=t:t&&n._extend(r,t),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),c(r,e,r.depth)}function s(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function f(e,t){return e}function c(e,t,r){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return v(i)||(i=c(e,i,r)),i}var o=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,t);if(o)return o;var a=Object.keys(t),u=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),_(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(t);if(0===a.length){if(A(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(y(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(_(t))return l(t)}var f,w="",E=!1,C=["{","}"];(h(t)&&(E=!0,C=["[","]"]),A(t))&&(w=" [Function"+(t.name?": "+t.name:"")+"]");return y(t)&&(w=" "+RegExp.prototype.toString.call(t)),x(t)&&(w=" "+Date.prototype.toUTCString.call(t)),_(t)&&(w=" "+l(t)),0!==a.length||E&&0!=t.length?r<0?y(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),f=E?function(e,t,n,r,i){for(var o=[],a=0,u=t.length;a<u;++a)O(t,String(a))?o.push(p(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,n,r,i,!0))}),o}(e,t,r,u,a):a.map(function(n){return p(e,t,r,u,n,E)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(f,w,C)):C[0]+w+C[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,i,o){var a,u,s;if((s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(u=e.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),u||(e.seen.indexOf(s.value)<0?(u=g(n)?c(e,s.value,null):c(e,s.value,n-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function h(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return void 0===e}function y(e){return w(e)&&"[object RegExp]"===E(e)}function w(e){return"object"==typeof e&&null!==e}function x(e){return w(e)&&"[object Date]"===E(e)}function _(e){return w(e)&&("[object Error]"===E(e)||e instanceof Error)}function A(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(e){if(b(o)&&(o=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var r=t.pid;a[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else a[e]=function(){};return a[e]},n.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=d,n.isNull=g,n.isNullOrUndefined=function(e){return null==e},n.isNumber=m,n.isString=v,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=b,n.isRegExp=y,n.isObject=w,n.isDate=x,n.isError=_,n.isFunction=A,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("./support/isBuffer");var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":"),[e.getDate(),k[e.getMonth()],t].join(" ")),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:50,inherits:2}],5:[function(e,t,n){"use strict";n.byteLength=function(e){var t=f(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=f(e),a=r[0],u=r[1],s=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,u)),c=0,l=u>0?a-4:a;for(n=0;n<l;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;2===u&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,s[c++]=255&t);1===u&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t);return s},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,u=n-i;a<u;a+=16383)o.push(c(e,a,a+16383>u?u:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],i[a.charCodeAt(u)]=u;function f(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,o,a=[],u=t;u<n;u+=3)i=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],6:[function(e,t,n){(function(t){(function(){"use strict";var t=e("base64-js"),r=e("ieee754");n.Buffer=a,n.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},n.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|p(e,t),r=o(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(I(e,ArrayBuffer)||e&&I(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=a.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|l(e.length),n=o(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return"number"!=typeof e.length||N(e.length)?o(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return s(e),o(e<0?0:0|l(e))}function c(e){for(var t=e.length<0?0:0|l(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function l(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||I(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return L(e).length;default:if(i)return r?-1:M(e).length;t=(""+t).toLowerCase(),i=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function d(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),N(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,n/=2}function f(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<u;o++)if(f(e,o)===f(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===s)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+s>u&&(n=u-s),o=n;o>=0;o--){for(var l=!0,p=0;p<s;p++)if(f(e,o+p)!==f(t,p)){l=!1;break}if(l)return o}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(N(u))return a;e[n+a]=u}return a}function v(e,t,n,r){return R(M(t,e.length-n),e,n,r)}function b(e,t,n,r){return R(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function y(e,t,n,r){return b(e,t,n,r)}function w(e,t,n,r){return R(L(t),e,n,r)}function x(e,t,n,r){return R(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function _(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,u,s,f=e[i],c=null,l=f>239?4:f>223?3:f>191?2:1;if(i+l<=n)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(o=e[i+1]))&&(s=(31&f)<<6|63&o)>127&&(c=s);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(s=(15&f)<<12|(63&o)<<6|63&a)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:o=e[i+1],a=e[i+2],u=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&u)&&(s=(15&f)<<18|(63&o)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(c=s)}null===c?(c=65533,l=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=l}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,n){return u(e,t,n)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,n){return function(e,t,n){return s(e),e<=0?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},a.allocUnsafe=function(e){return f(e)},a.allocUnsafeSlow=function(e){return f(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(I(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),I(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(I(o,Uint8Array)&&(o=a.from(o)),!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return _(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(I(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),u=(n>>>=0)-(t>>>=0),s=Math.min(o,u),f=this.slice(r,i),c=e.slice(t,n),l=0;l<s;++l)if(f[l]!==c[l]){o=f[l],u=c[l];break}return o<u?-1:u<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return d(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return d(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return y(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function O(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=P(e[o]);return i}function T(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,i,o){return t=+t,n>>>=0,o||B(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function D(e,t,n,i,o){return t=+t,n>>>=0,o||B(e,0,n,8),r.write(e,t,n,i,52,8),n+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=a.prototype,r},a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),r.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),r.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),r.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),r.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);S(this,e,t,n,i-1,-i)}var o=0,a=1,u=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);S(this,e,t,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;o>=0;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var u=a.isBuffer(e)?e:a.from(e,r),s=u.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=u[o%s]}return this};var F=/[^+/0-9A-Za-z-_]/g;function P(e){return e<16?"0"+e.toString(16):e.toString(16)}function M(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function L(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function I(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function N(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":5,buffer:6,ieee754:42}],7:[function(e,t,n){(function(e){(function(){var r,i;r=this,i=function(){"use strict";var t=function(){},n={},r=[],i=[];function o(e,o){var a,u,s,f,c=i;for(f=arguments.length;2<f--;)r.push(arguments[f]);for(o&&null!=o.children&&(r.length||r.push(o.children),delete o.children);r.length;)if((u=r.pop())&&void 0!==u.pop)for(f=u.length;f--;)r.push(u[f]);else"boolean"==typeof u&&(u=null),(s="function"!=typeof e)&&(null==u?u="":"number"==typeof u?u=String(u):"string"!=typeof u&&(s=!1)),s&&a?c[c.length-1]+=u:c===i?c=[u]:c.push(u),a=s;var l=new t;return l.nodeName=e,l.children=c,l.attributes=null==o?void 0:o,l.key=null==o?void 0:o.key,void 0!==n.vnode&&n.vnode(l),l}function a(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}var s="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function f(e,t){return o(e.nodeName,a(a({},e.attributes),t),2<arguments.length?[].slice.call(arguments,2):e.children)}var c=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,l=[];function p(e){!e._dirty&&(e._dirty=!0)&&1==l.push(e)&&(n.debounceRendering||s)(h)}function h(){for(var e;e=l.pop();)e._dirty&&B(e)}function d(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function g(e){var t=a({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function m(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n,r,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)u(n,null),u(r,e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(e.style[o]="");for(var o in r)e.style[o]="number"==typeof r[o]&&!1===c.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,b,a):e.removeEventListener(t,b,a),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var s=i&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function b(e){return this._listeners[e.type](n.event&&n.event(e)||e)}var y=[],w=0,x=!1,_=!1;function A(){for(var e;e=y.shift();)n.afterMount&&n.afterMount(e),e.componentDidMount&&e.componentDidMount()}function E(e,t,n,r,i,o){w++||(x=null!=i&&void 0!==i.ownerSVGElement,_=null!=e&&!("__preactattr_"in e));var a=function e(t,n,r,i,o){var a=t,u=x;if(null!=n&&"boolean"!=typeof n||(n=""),"string"==typeof n||"number"==typeof n)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||o)?t.nodeValue!=n&&(t.nodeValue=n):(a=document.createTextNode(n),t&&(t.parentNode&&t.parentNode.replaceChild(a,t),C(t,!0))),a.__preactattr_=!0,a;var s=n.nodeName;if("function"==typeof s)return function(e,t,n,r){for(var i=e&&e._component,o=i,a=e,u=i&&e._componentConstructor===t.nodeName,s=u,f=g(t);i&&!s&&(i=i._parentComponent);)s=i.constructor===t.nodeName;return i&&s&&(!r||i._component)?(S(i,f,3,n,r),e=i.base):(o&&!u&&(z(o),e=a=null),i=T(t.nodeName,f,n),e&&!i.nextBase&&(i.nextBase=e,a=null),S(i,f,1,n,r),e=i.base,a&&e!==a&&(a._component=null,C(a,!1))),e}(t,n,r,i);if(x="svg"===s||"foreignObject"!==s&&x,s=String(s),(!t||!d(t,s))&&(a=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(s,x),t)){for(;t.firstChild;)a.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(a,t),C(t,!0)}var f=a.firstChild,c=a.__preactattr_,l=n.children;if(null==c){c=a.__preactattr_={};for(var p=a.attributes,h=p.length;h--;)c[p[h].name]=p[h].value}return!_&&l&&1===l.length&&"string"==typeof l[0]&&null!=f&&void 0!==f.splitText&&null==f.nextSibling?f.nodeValue!=l[0]&&(f.nodeValue=l[0]):(l&&l.length||null!=f)&&function(t,n,r,i,o){var a,u,s,f,c,l,p,h,g=t.childNodes,v=[],b={},y=0,w=0,x=g.length,_=0,A=n?n.length:0;if(0!==x)for(var E=0;E<x;E++){var k=g[E],O=k.__preactattr_,T=A&&O?k._component?k._component.__key:O.key:null;null!=T?(y++,b[T]=k):(O||(void 0!==k.splitText?!o||k.nodeValue.trim():o))&&(v[_++]=k)}if(0!==A)for(var E=0;E<A;E++){f=n[E],c=null;var T=f.key;if(null!=T)y&&void 0!==b[T]&&(c=b[T],b[T]=void 0,y--);else if(w<_)for(a=w;a<_;a++)if(void 0!==v[a]&&(l=u=v[a],h=o,"string"==typeof(p=f)||"number"==typeof p?void 0!==l.splitText:"string"==typeof p.nodeName?!l._componentConstructor&&d(l,p.nodeName):h||l._componentConstructor===p.nodeName)){c=u,v[a]=void 0,a===_-1&&_--,a===w&&w++;break}c=e(c,f,r,i),s=g[E],c&&c!==t&&c!==s&&(null==s?t.appendChild(c):c===s.nextSibling?m(s):t.insertBefore(c,s))}if(y)for(var E in b)void 0!==b[E]&&C(b[E],!1);for(;w<=_;)void 0!==(c=v[_--])&&C(c,!1)}(a,l,r,i,_||null!=c.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||v(e,r,n[r],n[r]=void 0,x);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||v(e,r,n[r],n[r]=t[r],x)}(a,n.attributes,c),x=u,a}(e,t,n,r,o);return i&&a.parentNode!==i&&i.appendChild(a),--w||(_=!1,o||A()),a}function C(e,t){var n=e._component;n?z(n):(null!=e.__preactattr_&&u(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||m(e),k(e))}function k(e){for(e=e.lastChild;e;){var t=e.previousSibling;C(e,!0),e=t}}var O=[];function T(e,t,n){var r,i=O.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),D.call(r,t,n)):((r=new D(t,n)).constructor=e,r.render=j);i--;)if(O[i].constructor===e)return r.nextBase=O[i].nextBase,O.splice(i,1),r;return r}function j(e,t,n){return this.constructor(e,n)}function S(e,t,r,i,o){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||o?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i)),i&&i!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=i),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==r&&(1!==r&&!1===n.syncComponentUpdates&&e.base?p(e):B(e,1,o)),u(e.__ref,e))}function B(e,t,r,i){if(!e._disable){var o,u,s,f=e.props,c=e.state,l=e.context,p=e.prevProps||f,h=e.prevState||c,d=e.prevContext||l,m=e.base,v=e.nextBase,b=m||v,x=e._component,_=!1,k=d;if(e.constructor.getDerivedStateFromProps&&(c=a(a({},c),e.constructor.getDerivedStateFromProps(f,c)),e.state=c),m&&(e.props=p,e.state=h,e.context=d,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(f,c,l)?_=!0:e.componentWillUpdate&&e.componentWillUpdate(f,c,l),e.props=f,e.state=c,e.context=l),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!_){o=e.render(f,c,l),e.getChildContext&&(l=a(a({},l),e.getChildContext())),m&&e.getSnapshotBeforeUpdate&&(k=e.getSnapshotBeforeUpdate(p,h));var O,j,D=o&&o.nodeName;if("function"==typeof D){var F=g(o);(u=x)&&u.constructor===D&&F.key==u.__key?S(u,F,1,l,!1):(O=u,e._component=u=T(D,F,l),u.nextBase=u.nextBase||v,u._parentComponent=e,S(u,F,0,l,!1),B(u,1,r,!0)),j=u.base}else s=b,(O=x)&&(s=e._component=null),(b||1===t)&&(s&&(s._component=null),j=E(s,o,l,r||!m,b&&b.parentNode,!0));if(b&&j!==b&&u!==x){var P=b.parentNode;P&&j!==P&&(P.replaceChild(j,b),O||(b._component=null,C(b,!1)))}if(O&&z(O),(e.base=j)&&!i){for(var M=e,L=e;L=L._parentComponent;)(M=L).base=j;j._component=M,j._componentConstructor=M.constructor}}for(!m||r?y.push(e):_||(e.componentDidUpdate&&e.componentDidUpdate(p,h,k),n.afterUpdate&&n.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);w||i||A()}}function z(e){n.beforeUnmount&&n.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var r=e._component;r?z(r):t&&(null!=t.__preactattr_&&u(t.__preactattr_.ref,null),m(e.nextBase=t),O.push(e),k(t)),u(e.__ref,null)}function D(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function F(e,t,n){return E(n,e,{},!1,t,!1)}function P(){return{}}a(D.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=a(a({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),p(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),B(this,2)},render:function(){}});var M={h:o,createElement:o,cloneElement:f,createRef:P,Component:D,render:F,rerender:h,options:n},L=Object.freeze({default:M,h:o,createElement:o,cloneElement:f,createRef:P,Component:D,render:F,rerender:h,options:n}),R=[],I=[];function N(e,t){if(t=t||{},void 0===e)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var n,r=!0===t.prepend?"prepend":"append",i=void 0!==t.container?t.container:document.querySelector("head"),o=R.indexOf(i);return-1===o&&(o=R.push(i)-1,I[o]={}),void 0!==I[o]&&void 0!==I[o][r]?n=I[o][r]:(n=I[o][r]=function(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}(),"prepend"==r?i.insertBefore(n,i.childNodes[0]):i.appendChild(n)),65279===e.charCodeAt(0)&&(e=e.substr(1,e.length)),n.styleSheet?n.styleSheet.cssText+=e:n.textContent+=e,n}var U=N,H=N;U.insertCss=H;var V,q,W=(function(t){var n=function(){function t(n,i,o,a){"object"==typeof i&&(o=i.depth,a=i.prototype,i.filter,i=i.circular);var u=[],s=[],f=void 0!==e;return void 0===i&&(i=!0),void 0===o&&(o=1/0),function n(o,c){if(null===o)return null;if(0==c)return o;var l,p;if("object"!=typeof o)return o;if(t.__isArray(o))l=[];else if(t.__isRegExp(o))l=new RegExp(o.source,r(o)),o.lastIndex&&(l.lastIndex=o.lastIndex);else if(t.__isDate(o))l=new Date(o.getTime());else{if(f&&e.isBuffer(o))return l=e.allocUnsafe?e.allocUnsafe(o.length):new e(o.length),o.copy(l),l;void 0===a?(p=Object.getPrototypeOf(o),l=Object.create(p)):(l=Object.create(a),p=a)}if(i){var h=u.indexOf(o);if(-1!=h)return s[h];u.push(o),s.push(l)}for(var d in o){var g;p&&(g=Object.getOwnPropertyDescriptor(p,d)),g&&null==g.set||(l[d]=n(o[d],c-1))}return l}(n,o)}function n(e){return Object.prototype.toString.call(e)}function r(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=n,t.__isDate=function(e){return"object"==typeof e&&"[object Date]"===n(e)},t.__isArray=function(e){return"object"==typeof e&&"[object Array]"===n(e)},t.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===n(e)},t.__getRegExpFlags=r,t}();t.exports&&(t.exports=n)}(V={exports:{}}),V.exports),Y=function(e,t){return e=e||{},Object.keys(t).forEach(function(n){void 0===e[n]&&(e[n]=W(t[n]))}),e},$=(q=L)&&q.default||q,X=function(e){function t(){for(var t in $.Component.apply(this,arguments),e)"render"!==t&&"function"==typeof e[t]&&(this[t]=e[t].bind(this));e.init&&e.init.call(this)}return(t.prototype=Object.assign(Object.create($.Component.prototype),e)).constructor=t},G=function(e){return/^[0-9\.\s]*$/.test(e=""+e)?e+"px":e},Q={fontFamily:"'Helvetica', sans-serif",fontSize:13,sliderHeight:22,controlBgColor:"#444",fieldBgColor:"#333",fieldHoverColor:"#383838",fieldActiveColor:"#383838",fieldBorderColor:"#232323",fieldHeight:30,sectionHeadingBgColor:"#222",sectionHeadingHoverColor:"#444",sectionHeadingColor:"#e8e8e8",sectionHeadingBorderColor:"#222",inactiveTabBgColor:"#333",inactiveTabColor:"#ccc",inactiveTabHoverBgColor:"#444",inactiveTabHoverColor:"#ccc",activeTabBgColor:"#555",activeTabColor:"#fff",controlBorderColor:"#666",sliderThumbColor:"#888",fontColor:"#e8e8e8",sectionHeadingHeight:24,minLabelWidth:110,minControlWidth:130,visibilityFontColor:"rgba(0, 0, 0, 0.3)",focusBorderColor:"#888",controlBorderRadius:2},Z=$.h,K={name:"select",component:X({render:function(){var e=this,t=this.props.field,n=t.$config,r=this.props.className;return Z("div",{className:r+"__field "+r+"__field--select"},Z("label",{className:r+"__label",htmlFor:r+"-"+t.path},Z("span",{className:r+"__labelText"},n.label||t.name)," ",Z("span",{className:r+"__container"},Z("select",{name:t.path,id:r+"-"+t.path,onChange:function(t){return e.props.field.value=t.target.value}},t.options.map(function(e){return Z("option",{value:e,selected:e===t.value},e)})))))}}),css:function(e,t){return"\n      ."+e+"__field--select select {\n        font-family: inherit;\n        font-size: inherit;\n        height: "+t.sliderHeight+";\n        width: 100%;\n        color: inherit;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        background-color: "+t.controlBgColor+";\n        border: 1px solid "+t.controlBorderColor+";\n        outline: none;\n        margin: 0;\n        padding: 0 5px;\n        border-radius: "+t.controlBorderRadius+";\n        background-image: linear-gradient("+t.controlBorderColor+", "+t.controlBorderColor+"),\n          linear-gradient(-130deg, transparent 50%, "+t.controlBgColor+" 52%),\n          linear-gradient(-230deg, transparent 50%, "+t.controlBgColor+" 52%),\n          linear-gradient("+t.fontColor+" 42%, "+t.controlBgColor+" 42%);\n        background-repeat: no-repeat, no-repeat, no-repeat, no-repeat;\n        background-size: 1px 100%, 20px 16px, 20px 16px, 20px 60%;\n        background-position: right 20px center, right bottom, right bottom, right bottom;\n      }\n\n      ."+e+"__field--select select:focus {\n        "+t.focusBorder+"\n      }\n    "}},J=function(e){var t,n=window.getComputedStyle(e),r=n.display,i=n.position,o=n.visibility,a=n.maxHeight,u=a.replace("px","").replace("%","");return"none"!==r&&"0"!==u?e.offsetHeight:(e.style.maxHeight="",e.style.position="absolute",e.style.visibility="hidden",e.style.display="block",t=e.offsetHeight,e.style.maxHeight=a,e.style.display=r,e.style.position=i,e.style.visibility=o,t)},ee=function(e,t){if("0"===e.style.maxHeight.replace("px","").replace("%","")){var n=J(e)+"px";e.style.transition="max-height 0.1s ease-in-out",e.style.overflowY="hidden",e.style.maxHeight="0",e.style.display="block";var r=function(){e.style.transition="none",e.style.overflowY="visible",e.style.maxHeight="",e.removeEventListener("transitionend",r),t&&t()};e.addEventListener("transitionend",r),setTimeout(function(){e.style.maxHeight=n},20)}else n=J(e)+"px",e.style.transition="max-height 0.1s ease-in-out",e.style.overflowY="hidden",e.style.maxHeight=n,e.style.display="block",r=function(){e.style.transition="none",e.removeEventListener("transitionend",r),t&&t()},e.addEventListener("transitionend",r),setTimeout(function(){e.style.maxHeight="0"},20)},te=$.h,ne={name:"section",component:X({init:function(){var e=this.props.field.$config.expanded;e=void 0===e||!!e,this.state={expanded:e}},toggleCollapsed:function(e){e.stopPropagation(),ee(this.contentsEl),this.setState({expanded:!this.state.expanded})},getRef:function(e){this.contentsEl=e,!1===this.state.expanded&&ee(this.contentsEl)},render:function(){var e=this,t=this.props.field,n=t.$config.label||t.name,r=this.props.className,i=!t.parent||"tabs"!==t.parent.type;return t.parentField||n||(n="Controls"),te("fieldset",{className:r+"__section "+(this.state.expanded?r+"__section--expanded":"")+" "+(i?r+"__section--wrapped":"")},i&&te("legend",{className:r+"__sectionHeading"},te("button",{onClick:this.toggleCollapsed},n)),te("div",{ref:this.getRef,className:r+"__sectionFields"},Object.keys(t.value.$displayFields).map(function(n){return te(e.props.ControlComponent,{field:t.value.$path[n].$field})})))}}),css:function(e,t){return"\n      ."+e+"__section {\n        margin: 0;\n        margin-top: -1px;\n        padding: 0;\n        border: none;\n      }\n\n      ."+e+"__sectionHeading {\n        border: 1px solid "+t.sectionHeadingBorderColor+";\n        position: relative;\n        z-index: 1;\n        box-sizing: border-box;\n      }\n\n      ."+e+"__section--wrapped > ."+e+"__sectionFields {\n        margin-left: 4px;\n      }\n\n      ."+e+"__sectionFields {\n        box-sizing: border-box;\n      }\n\n      ."+e+"__sectionFields ."+e+"__field {\n        border-bottom: 1px solid "+t.fieldBorderColor+";\n        box-sizing: border-box;\n      }\n\n      ."+e+"__sectionFields ."+e+"__sectionFields {\n        border-right: none;\n        margin-right: 0;\n      }\n\n      ."+e+" > ."+e+"__section:first-child > ."+e+"__sectionHeading:first-child {\n        border-right: 1px solid "+t.sectionHeadingBorderColor+";\n      }\n\n      ."+e+"__sectionHeading {\n        padding: 0;\n        font-family: inherit;\n        user-select: none;\n        -moz-user-select: -moz-none;\n        text-indent: 5px;\n        cursor: pointer;\n        width: 100%;\n\n        color: "+t.sectionHeadingColor+";\n        background-color: "+t.sectionHeadingBgColor+";\n        height: "+t.sectionHeadingHeight+";\n        line-height: "+t.sectionHeadingHeight+";\n      }\n\n      ."+e+"__sectionHeading button:focus {\n        background-color: "+t.sectionHeadingHoverColor+";\n      }\n\n      ."+e+"__sectionHeading > button {\n        height: 100%;\n        vertical-align: middle;\n        font-size: 1.0em;\n        cursor: pointer;\n        text-align: left;\n        outline: none;\n        color: inherit;\n        font-size: inherit;\n        font-family: inherit;\n        background: transparent;\n        border: none;\n        border-radius: 0;\n        display: block;\n        width: 100%;\n      }\n\n      ."+e+"__sectionHeading:hover {\n        background-color: "+t.sectionHeadingHoverColor+";\n      }\n\n      ."+e+"__sectionHeading > button::before {\n        transform: translate(0, -1px) rotate(90deg);\n      }\n\n      ."+e+"__sectionHeading > button::before {\n        content: '▲';\n        display: inline-block;\n        transform-origin: 50% 50%;\n        margin-right: 0.5em;\n        font-size: 0.5em;\n        vertical-align: middle;\n      }\n\n      ."+e+"__section--expanded > ."+e+"__sectionHeading > button::before {\n        transform: none;\n        content: '▼';\n      }\n    "}},re=$.h,ie={name:"tabs",component:X({init:function(){var e=this.props.field,t=Object.keys(e.value.$displayFields);this.state={activeTab:t[0]}},getRef:function(e){this.contentsEl=e},activateTab:function(e,t){this.setState({activeTab:e}),t.preventDefault()},preventDefault:function(e){},render:function(){var e=this,t=this.props.field,n=t.$config.label||t.name,r=this.props.className;t.parentField||""!==n||(n="Controls");for(var i=Object.keys(t.value.$displayFields),o={},a=0;a<i.length;a++){var u=i[a];o[u]=u;var s=t.value.$path[u];if(s){var f=s.$field;if(f){var c=f.$config;c&&c.label&&(o[u]=c.label)}}}return re("div",{className:r+"__tabs"},re("ul",{className:r+"__tabList"},i.map(function(n){return re("li",{className:r+"__tabItem "+(n===e.state.activeTab?r+"__tabItem--active":"")},re("a",{href:"#"+r+"-"+t.path+"-"+n,onClick:function(t){return e.activateTab(n,t)}},o[n]))})),i.map(function(n){return n===e.state.activeTab&&re("div",{className:r+"__tabPanel",id:r+"-"+t.path+"-"+n},re(e.props.ControlComponent,{field:t.value.$path[n].$field}))}))}}),css:function(e,t){return"\n      ."+e+"__tabs {\n        margin: 0;\n        margin-top: -1px;\n        padding: 0;\n        border: none;\n      }\n\n      ."+e+"__tabList {\n        background-color: "+t.sectionHeadingBgColor+";\n        border-bottom: 6px solid "+t.activeTabBgColor+";\n        display: flex;\n        flex-wrap: wrap;\n        flex-direction: row;\n        margin: 0;\n        padding: 0;\n        padding-top: 6px;\n        align-items: flex-end;\n      }\n\n      ."+e+"__tabItem {\n        -moz-user-select: none;\n        -webkit-user-select: none;\n        user-select: none;\n        list-style-type: none;\n        border-top-left-radius: 2px;\n        border-top-right-radius: 2px;\n        margin-left: 6px;\n        display: inline-block;\n        background-color: "+t.inactiveTabBgColor+";\n        color: "+t.inactiveTabColor+";\n        padding: 5px 7px;\n        padding-bottom: 3px;\n        margin-top: 5px;\n      }\n\n      ."+e+"__tabItem:before {\n        content: none;\n      }\n\n      ."+e+"__tabItem:hover {\n        background-color: "+t.inactiveTabHoverBgColor+";\n        color: "+t.inactiveTabHoverColor+";\n      }\n\n      ."+e+"__tabItem--active {\n        background-color: "+t.activeTabBgColor+";\n        color: "+t.activeTabColor+";\n        padding-bottom: 5px;\n        margin-top: 3px;\n      }\n\n      ."+e+"__tabItem--active:hover {\n        background-color: "+t.activeTabBgColor+";\n        color: "+t.activeTabColor+";\n      }\n\n      ."+e+"__tabItem a {\n        color: inherit;\n        text-decoration: none;\n      }\n    "}},oe=$.h,ae={name:"slider",component:X({render:function(){var e=this,t=this.props.field,n=t.$config,r=this.props.className;return oe("div",{className:r+"__field "+r+"__field--slider"},oe("label",{className:r+"__label",htmlFor:r+"-"+t.path},oe("span",{className:r+"__labelText"},n.label||t.name)," ",oe("span",{className:r+"__container"},oe("input",{id:r+"-"+t.path,name:t.path,type:"range",min:t.min,max:t.max,step:t.step,value:t.value,onInput:function(t){return e.props.field.value=parseFloat(t.target.value)}}),oe("span",{className:r+"__sliderValue"},t.value.toFixed(4).replace(/\.?0*$/,"")))))}}),css:function(e,t){return"\n      ."+e+"__field--slider input[type=range] {\n        width: 100%;\n        height: "+t.sliderHeight+";\n        -webkit-appearance: none;\n        vertical-align: middle;\n        border-radius: "+t.controlBorderRadius+";\n        margin: 0;\n        cursor: resize-ew;\n        border: 1px solid "+t.controlBorderColor+";\n      }\n\n      ."+e+"__field--slider input[type=range]:focus {\n        "+t.focusBorder+"\n      }\n\n      ."+e+"__field--slider input[type=range]::-webkit-slider-thumb {\n        height: "+t.sliderHeight+";\n        width: "+t.sliderHeight+";\n        background: "+t.sliderThumbColor+";\n        border-radius: 0;\n        cursor: ew-resize;\n        -webkit-appearance: none;\n      }\n\n      ."+e+"__field--slider input[type=range]::-moz-range-thumb {\n        height: "+t.sliderHeight+";\n        width: "+t.sliderHeight+";\n        border-radius: 0;\n        background: "+t.sliderThumbColor+";\n        cursor: ew-resize;\n      }\n\n      ."+e+"__field--slider input[type=range]::-ms-thumb {\n        height: "+t.sliderHeight+";\n        width: "+t.sliderHeight+";\n        border-radius: 0;\n        background: "+t.sliderThumbColor+";\n        cursor: ew-resize;\n      }\n\n      ."+e+"__field--slider input[type=range]::-webkit-slider-runnable-track {\n        height: "+t.sliderHeight+";\n        cursor: ew-resize;\n        background: "+t.controlBgColor+";\n      }\n\n      ."+e+"__field--slider input[type=range]::-moz-range-track {\n        height: "+t.sliderHeight+";\n        cursor: ew-resize;\n        background: "+t.controlBgColor+";\n      }\n\n      ."+e+"__field--slider input[type=range]::-ms-track {\n        height: "+t.sliderHeight+";\n        cursor: ew-resize;\n        background: transparent;\n        border-color: transparent;\n        color: transparent;\n      }\n\n      ."+e+"__field--slider input[type=range]::-ms-fill-lower {\n        background: "+t.controlBgColor+";\n      }\n\n      ."+e+"__field--slider input[type=range]::-ms-fill-upper {\n        background: "+t.controlBgColor+";\n      }\n\n      ."+e+"__field--slider input[type=range]:focus::-ms-fill-lower {\n        background: "+t.controlBgColor+";\n        "+t.focusBorder+"\n      }\n\n      ."+e+"__field--slider input[type=range]:focus::-ms-fill-upper {\n        background: "+t.controlBgColor+";\n        "+t.focusBorder+"\n      }\n\n      ."+e+"__sliderValue {\n        position: absolute;\n        pointer-events: none;\n        top: 0;\n        z-index: 11;\n        line-height: "+t.fieldHeight+";\n        height: "+t.fieldHeight+";\n        display: inline-block;\n        right: 15px;\n        text-shadow:  1px  0   "+t.visibilityFontColor+",\n                      0    1px "+t.visibilityFontColor+",\n                     -1px  0   "+t.visibilityFontColor+",\n                      0   -1px "+t.visibilityFontColor+",\n                      1px  1px "+t.visibilityFontColor+",\n                      1px -1px "+t.visibilityFontColor+",\n                     -1px  1px "+t.visibilityFontColor+",\n                     -1px -1px "+t.visibilityFontColor+";\n      }\n    "}},ue=$.h,se={name:"checkbox",component:X({render:function(){var e=this,t=this.props.field,n=t.$config,r=this.props.className;return ue("div",{className:r+"__field "+r+"__field--checkbox"},ue("label",{className:r+"__label",htmlFor:r+"-"+t.path},ue("span",{className:r+"__labelText"},n.label||t.name)," ",ue("span",{className:r+"__container"},ue("input",{id:r+"-"+t.path,name:t.path,type:"checkbox",checked:t.value,onInput:function(t){return e.props.field.value=t.target.checked}}))))}}),css:function(e,t){return"\n      ."+e+"__field--checkbox input[type=checkbox] {\n        height: 20px;\n        width: 20px;\n        margin-bottom: 0.2em;\n      }\n\n      ."+e+"__field--checkbox input[type=checkbox]:focus {\n        "+t.focusBorder+"\n      }\n    "}},fe=$.h,ce={name:"textinput",component:X({render:function(){var e=this,t=this.props.field,n=t.$config,r=this.props.className;return fe("div",{className:r+"__field "+r+"__field--text"},fe("label",{className:r+"__label",htmlFor:r+"-"+t.path},fe("span",{className:r+"__labelText"},n.label||t.name)," ",fe("span",{className:r+"__container"},fe("input",{id:r+"-"+t.path,name:t.path,type:"text",value:t.value,onInput:function(t){return e.props.field.value=t.target.value}}))))}}),css:function(e,t){return"\n      ."+e+"__field--text input[type=text] {\n        font-size: inherit;\n        font-family: inherit;\n        width: 100%;\n        margin: 0;\n        padding: 0 5px;\n        border: none;\n        height: "+t.sliderHeight+";\n        border-radius: "+t.controlBorderRadius+";\n        background-color: "+t.controlBgColor+";\n        border: 1px solid "+t.controlBorderColor+";\n        color: inherit;\n      }\n\n      ."+e+"__field--text input[type=text]:focus {\n        "+t.focusBorder+"\n      }\n    "}},le=$.h,pe={name:"button",component:X({render:function(){var e=this.props.field,t=e.$config,n=this.props.className;return le("div",{className:n+"__field "+n+"__field--button"},le("button",{onClick:e.value},t.label||e.name))}}),css:function(e,t){return"\n      ."+e+"__field--button button {\n        height: "+t.fieldHeight+";\n        font-size: inherit;\n        font-family: inherit;\n        outline: none;\n        cursor: pointer;\n        text-align: center;\n        display: block;\n        background: transparent;\n        color: inherit;\n        font-size: 1.0em;\n        width: 100%;\n        border: none;\n        border-radius: 0;\n      }\n\n      ."+e+"__field--button > button:hover {\n        background-color: "+t.fieldHoverColor+";\n      }\n\n      ."+e+"__field--button > button:active {\n        background-color: "+t.fieldActiveColor+";\n      }\n\n      ."+e+"__field--button > button:focus {\n        "+t.focusBorder+"\n      }\n\n      ."+e+"__field--button > button::before {\n        content: '';\n        width: 3px;\n        display: inline-block;\n        vertical-align: middle;\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n      }\n    "}},he=$.h,de={name:"color",component:X({render:function(){var e=this,t=this.props.field,n=t.$config,r=this.props.className;return he("div",{className:r+"__field "+r+"__field--color"},he("label",{className:r+"__label",htmlFor:r+"-"+t.path},he("span",{className:r+"__labelText"},n.label||t.name)," ",he("span",{className:r+"__container"},he("input",{id:r+"-"+t.path,name:t.path,type:"color",value:t.value,onInput:function(t){e.props.field.value=t.target.value}}))))}}),css:function(e,t){return"\n      ."+e+"__field--color input[type=color] {\n        margin: 0;\n        border: 1px solid #aaa;\n        width: 50px;\n        height: "+t.sliderHeight+";\n        border-radius: "+t.controlBorderRadius+";\n        padding: 0;\n      }\n\n      ."+e+"__field--color input[type=color]::-webkit-color-swatch-wrapper {\n        padding: 0px;\n        background-color: #888;\n      }\n\n      ."+e+"__field--color input[type=color]:focus {\n        "+t.focusBorder+"\n      }\n    "}},ge=$.h,me={name:"raw",component:X({getRef:function(e){this.el=e},getContent:function(e){return this.content=e.field.value,"function"==typeof this.content&&(this.content=this.content(ge,{field:e.field,state:e.state})),this.content},render:function(){var e=this.props.className;return ge("div",{className:e+"__field--raw "+e+"__field"},ge("div",{ref:this.getRef,className:e+"__rawContent"},this.getContent(this.props)))}}),css:function(e,t){return"\n      ."+e+"__field--raw {\n        height: auto;\n        padding: 0 7px 0 10px;\n        overflow: hidden;\n      }\n\n      ."+e+"__rawContent {\n        max-width: 100%;\n        margin: 0;\n        padding: 0;\n      }\n\n      ."+e+"__rawContent a {\n        color: inherit;\n      }\n\n      ."+e+"__rawContent::before {\n        background-color: #aaa;\n      }\n\n      ."+e+"__rawContent::before {\n        content: '';\n        width: 3px;\n        display: inline-block;\n        vertical-align: middle;\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n      }\n\n      ."+e+"__rawContent > p:first-child {\n        margin-top: 5px;\n      }\n\n      ."+e+"__rawContent > p:last-child{\n        margin-bottom: 5px;\n      }\n\n      ."+e+"__rawContent p {\n        line-height: 1.8;\n      }\n\n      ."+e+"__rawContent pre {\n        line-height: 1.3;\n        font-size: 0.8em;\n        margin: 0;\n      }\n    "}},ve=function(){var e={};function t(t,n){(n=Y(n||{},{containerCSS:"position:fixed;top:0;right:8px",style:!0,className:"controlPanel-"+Math.random().toString(36).substring(2,15)})).root=n.root||document.body;var r=n.className,i=X({render:function(){return $.h(function(t){var n=e[t];if(!n)throw new Error('Unrecognized component, "'+t+'"');return n}(this.props.field.type).component,{ControlComponent:i,className:r,field:this.props.field,state:t,h:$.h})}}),o=X({state:{dummy:0},componentDidMount:function(){var e=this;this.props.state.$field.onChanges(function(t){e.setState({dummy:e.state.dummy+1})})},getRef:function(e){for(var t=["mousedown","mouseup","mousemove","touchstart","touchmove","touchend","wheel"],r=0;r<t.length;r++)e.addEventListener(t[r],function(e){e.stopPropagation()});n.containerCSS&&(e.style.cssText=n.containerCSS)},render:function(){return $.h("div",{className:""+r,ref:this.getRef},$.h(i,{field:this.props.state.$field}))}});return n.style&&U(function(e,t,n){return(t=Object.assign({},Y(t||{},Q))).fontSize=G(t.fontSize),t.sliderHeight=G(t.sliderHeight),t.fieldHeight=G(t.fieldHeight),t.sectionHeadingHeight=G(t.sectionHeadingHeight),t.minLabelWidth=G(t.minLabelWidth),t.minControlWidth=G(t.minControlWidth),t.controlBorderRadius=G(t.controlBorderRadius),t.focusBorder="\n    outline: none;\n    border-color: "+t.focusBorderColor+";\n    box-shadow: 0 0 3px "+t.focusBorderColor+";\n  ","\n    ."+e+" {\n      color: "+t.fontColor+";\n      "+(t.fontSize?"font-size: "+t.fontSize:"")+";\n      "+(t.fontFamily?"font-family: "+t.fontFamily:"")+";\n      max-width: 100%;\n    }\n\n    ."+e+"__field {\n      position: relative;\n      background-color: "+t.fieldBgColor+";\n      border-right: 1px solid "+t.fieldBorderColor+";\n    }\n\n    ."+e+"__label {\n      display: block;\n      height: "+t.fieldHeight+";\n      line-height: "+t.fieldHeight+";\n      display: flex;\n      flex-direction: row;\n      background-color: "+t.fieldBgColor+";\n    }\n\n    ."+e+"__field:hover {\n      background-color: "+t.fieldHoverColor+";\n    }\n\n    ."+e+"__container {\n      display: flex;\n      flex-direction: row;\n      align-content: stretch;\n      justify-content: stretch;\n    \n      height: "+t.fieldHeight+";\n      flex: 1;\n      position: relative;\n      align-items: center;\n      position: relative;\n\n      min-width: "+t.minControlWidth+";\n      width: "+t.fieldHeight+";\n      padding-right: 8px;\n      text-indent: 8px;\n    }\n\n    ."+e+"__labelText {\n      user-select: none;\n      -moz-user-select: -moz-none;\n      text-indent: 8px;\n      margin-right: 4px;\n      display: inline-block;\n      min-width: "+t.minLabelWidth+";\n      line-height: "+t.fieldHeight+";\n    }\n\n    ."+e+"__field::before {\n      content: '';\n      width: 3px;\n      display: inline-block;\n      vertical-align: middle;\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n    }\n\n    ."+e+"__field--text::before { background-color: #49f; }\n    ."+e+"__field--color::before { background-color: #94f; }\n    ."+e+"__field--checkbox::before { background-color: #f49; }\n    ."+e+"__field--slider::before { background-color: #f84; }\n    ."+e+"__field--select::before { background-color: #8f4; }\n    ."+e+"__field--button > button::before { background-color: #8ff; }\n\n    "+Object.keys(n).map(function(r){var i=n[r].css;return i?i(e,t):""}).join("\n")+"\n  "}(r,n.theme,e)),$.render($.h(o,{state:t}),n.root),t}return t.registerComponent=function(n){return e[n.name]=n,t},t.registerComponents=function(e){for(var n=0;n<e.length;n++)t.registerComponent(e[n]);return t},t}();return ve.registerComponents([K,ne,ie,ae,se,ce,pe,de,me]),ve.preact=$,ve.preact.createClass=X,ve},"object"==typeof n&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):(r=r||self).ControlsGUI=i()}).call(this)}).call(this,e("buffer").Buffer)},{buffer:6}],8:[function(e,t,n){(function(e,r){(function(){var i,o;i=this,o=function(){"use strict";var t="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{};function n(e,t){return e(t={exports:{}},t.exports),t.exports}for(var i,o,a=function(e){return null!=e},u=Object.keys,s=function(){try{return!0}catch(e){return!1}}()?Object.keys:function(e){return u(a(e)?Object(e):e)},f=Math.max,c="function"==typeof(o=Object.assign)&&(o(i={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),i.foo+i.bar+i.trzy==="razdwatrzy")?Object.assign:function(e,t){var n,r,i,o=f(arguments.length,2);for(e=Object(function(e){if(!a(e))throw new TypeError("Cannot use null or undefined");return e}(e)),i=function(r){try{e[r]=t[r]}catch(r){n||(n=r)}},r=1;r<o;++r)t=arguments[r],s(t).forEach(i);if(void 0!==n)throw n;return e},l=Array.prototype.forEach,p=Object.create,h=function(e){var t=p(null);return l.call(arguments,function(e){a(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t},d=function(e){return"function"==typeof e},g="razdwatrzy",m=String.prototype.indexOf,v="function"==typeof g.contains&&!0===g.contains("dwa")&&!1===g.contains("foo")?String.prototype.contains:function(e){return-1<m.call(this,e,arguments[1])},b=n(function(e){(e.exports=function(e,t){var n,r,i,o,a;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],null==e?(n=i=!0,r=!1):(n=v.call(e,"c"),r=v.call(e,"e"),i=v.call(e,"w")),a={value:t,configurable:n,enumerable:r,writable:i},o?c(h(o),a):a}).gs=function(e,t,n){var r,i,o,a;return"string"!=typeof e?(o=n,n=t,t=e,e=null):o=arguments[3],null==t?t=void 0:d(t)?null==n?n=void 0:d(n)||(o=n,n=void 0):(o=t,t=n=void 0),i=null==e?!(r=!0):(r=v.call(e,"c"),v.call(e,"e")),a={get:t,set:n,configurable:r,enumerable:i},o?c(h(o),a):a}}),y=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},w=n(function(e,t){var n,r,i,o,a,u,s,f=Function.prototype.apply,c=Function.prototype.call,l=Object.create,p=Object.defineProperty,h=Object.defineProperties,d=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var r,o;return y(t),n.call(o=this,e,r=function(){i.call(o,e,r),f.call(t,this,arguments)}),r.__eeOnceListener__=t,this},a={on:n=function(e,t){var n;return y(t),d.call(this,"__ee__")?n=this.__ee__:(n=g.value=l(null),p(this,"__ee__",g),g.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:r,off:i=function(e,t){var n,r,i,o;if(y(t),!d.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(r=n[e]))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},emit:o=function(e){var t,n,r,i,o;if(d.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)f.call(r,this,o)}else switch(arguments.length){case 1:c.call(i,this);break;case 2:c.call(i,this,arguments[1]);break;case 3:c.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];f.call(i,this,o)}}},u={on:b(n),once:b(r),off:b(i),emit:b(o)},s=h({},u),e.exports=t=function(e){return null==e?l(s):h(Object(e),u)},t.methods=a}),x=(w.methods,n(function(n){(function(){var t,r,i,o,a,u;"undefined"!=typeof performance&&null!==performance&&performance.now?n.exports=function(){return performance.now()}:null!=e&&e.hrtime?(n.exports=function(){return(t()-a)/1e6},r=e.hrtime,o=(t=function(){var e;return 1e9*(e=r())[0]+e[1]})(),u=1e9*e.uptime(),a=o-u):i=Date.now?(n.exports=function(){return Date.now()-i},Date.now()):(n.exports=function(){return(new Date).getTime()-i},(new Date).getTime())}).call(t)})),_="undefined"==typeof window?t:window,A=["moz","webkit"],E="AnimationFrame",C=_["request"+E],k=_["cancel"+E]||_["cancelRequest"+E],O=0;!C&&O<A.length;O++)C=_[A[O]+"Request"+E],k=_[A[O]+"Cancel"+E]||_[A[O]+"CancelRequest"+E];if(!C||!k){var T=0,j=0,S=[];C=function(e){if(0===S.length){var t=x(),n=Math.max(0,1e3/60-(t-T));T=n+t,setTimeout(function(){for(var e=S.slice(0),t=S.length=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(T)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return S.push({handle:++j,callback:e,cancelled:!1}),j},k=function(e){for(var t=0;t<S.length;t++)S[t].handle===e&&(S[t].cancelled=!0)}}var B=function(e){return C.call(_,e)};B.cancel=function(){k.apply(_,arguments)},B.polyfill=function(e){e||(e=_),e.requestAnimationFrame=C,e.cancelAnimationFrame=k};var z=D;function D(e,t,n,r){if(/\./.test(e))throw new Error("Field names may not contain a period");r=r||{};var i=t;this.parent=n||null,this.events=new w,this.type=null,this.name=e,this.batchedUpdates={},this.batchUpdatePaths=[],this.batchUpdateRaf=null,Object.defineProperties(this,{$field:{enumerable:!1,value:this},$config:{enumerable:!1,value:r},value:{get:function(){return i},set:function(e){var t={field:this,name:this.name,path:this.path,fullPath:this.path,oldValue:i,value:e},n=[],r=this;do{t.path=n.join(".");var o={};o[t.path||this.name]=Object.assign({},t),r.events.emit&&(r.events.emit("beforeChange",Object.assign({},t)),r.events.emit("beforeChanges",o)),r._batchEmit&&r._batchEmit(t.path,Object.assign({},t)),n.unshift(r.name)}while(r=r.parent);i=e}},path:{enumerable:!0,get:function(){var e=(this.parent||{}).path;return this.name?(e?e+".":"")+this.name:null}}})}D.prototype={onBeforeChange:function(e){return this.events.on("beforeChange",e),this},offBeforeChange:function(e){return this.events.off("beforeChange",e),this},onBeforeChanges:function(e){return this.events.on("beforeChanges",e),this},offBeforeChanges:function(e){return this.events.off("beforeChanges",e),this},onChange:function(e){return this.events.on("change",e),this},offChange:function(e){return this.events.off("change",e),this},onChanges:function(e){return this.events.on("changes",e),this},offChanges:function(e){return this.events.off("changes",e),this},_emitUpdate:function(){for(this.events.emit("changes",Object.assign({},this.batchedUpdates));this.batchUpdatePaths.length;)for(var e=Object.keys(this.batchedUpdates),t=0;t<e.length;t++){var n=this.batchedUpdates[e[t]],r=this.batchUpdatePaths.pop();this.events.emit("change",n),this.events.emit("change:"+r,n)}this.batchedUpdates={},this.batchUpdateRaf=null},_batchEmit:function(e,t){var n=this.batchedUpdates[t.path];n&&(t.oldValue=n.oldValue),this.batchUpdatePaths.push(e),this.batchedUpdates[e]=t,this.batchUpdateRaf||(this.batchUpdateRaf=B(this._emitUpdate.bind(this)))}};var F=P;function P(e,t,n,r){if(!(this instanceof P))return new P(e,t,n,r);z.call(this,e,t,r,n),this.type="raw"}P.prototype=Object.create(z.prototype);var M=L;function L(e,t,n,r){if(!(this instanceof L))return new L(e,t,n,r);t=void 0===t?0:t,n=n||{},z.call(this,e,t,r,n);var i=void 0===n.min?Math.min(t,0):n.min,o=void 0===n.max?Math.max(t,1):n.max,a=void 0===n.step?1:n.step;this.type="slider",this.min=i,this.max=o,this.step=a}L.prototype=Object.create(z.prototype);var R=I;function I(e,t,n,r){if(!(this instanceof I))return new I(e,t,n,r);z.call(this,e,t,r,n),this.type="button"}I.prototype=Object.create(z.prototype);var N=U;function U(e,t,n,r){if(!(this instanceof U))return new U(e,t,n,r);t=void 0===t?"":t,z.call(this,e,t,r,n),this.type="textinput"}U.prototype=Object.create(z.prototype);var H=V;function V(e,t,n,r){if(!(this instanceof V))return new V(e,t,n);t=void 0===t?"#ffffff":t,z.call(this,e,t,r,n),this.type="color"}V.prototype=Object.create(z.prototype);var q=W;function W(e,t,n,r){if(!(this instanceof W))return new W(e,t,n,r);t=void 0===t||!!t,z.call(this,e,t,r,n),this.type="checkbox"}W.prototype=Object.create(z.prototype);var Y="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},$=/(#(?:[0-9a-fA-F]{2,4}){2,4}|(#[0-9a-fA-F]{3})|(rgb|hsl)a?((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?))/,X=function(e){if(e&&e.type)return e.type+"field";if(function(e){return Y.Element&&e instanceof Y.Element||Y.HTMLDocument&&e instanceof Y.HTMLDocument}(e))return"rawfield";if("function"==typeof e)return"button";switch(typeof e){case"string":return $.test(e)?"color":"textinput";case"number":return"number";case"boolean":return"boolean";case"raw":return"raw";case"button":return"button";case"object":return"object"}},G=Q;function Q(e,t,n,r){var i=this;n=n||{};var o={},a={},u={};z.call(this,e,u,r,n),this.type="section",Object.defineProperty(a,"$field",{enumerable:!1,value:this}),Object.defineProperties(u,{$field:{enumerable:!1,value:this},$path:{enumerable:!1,value:a},$displayFields:{enumerable:!1,value:o}}),Object.keys(t).forEach(function(e){var n=o[e]=function(e,t,n){switch(X(t)){case"rawfield":case"buttonfield":case"colorfield":case"textfield":case"sliderfield":case"selectfield":case"rangesliderfield":case"checkboxfield":case"sectionfield":case"tabsfield":if(t.path)throw new Error("You may only add an field to a set of controls once.");return t.$field.parent=n,t.name=e,t;case"color":return new H(e,t,{},n);case"raw":return new F(e,t,{},n);case"button":return new R(e,t,{},n);case"textinput":return new N(e,t,{},n);case"number":return new M(e,t,{},n);case"boolean":return new q(e,t,{},n);case"object":return new Q(e,t,{},n);default:return null}}(e,t[e],i),r=n.$config;if("raw"===n.type||"button"===n.type){var s=void 0!==r.enumerable&&!!r.enumerable;Object.defineProperty(u,e,{enumerable:s,get:function(){return n.value}}),Object.defineProperty(a,e,{enumerable:s,get:function(){return n}})}else"section"===n.type||"tabs"===n.type?(s=void 0===r.enumerable||!!r.enumerable,Object.defineProperty(u,e,{enumerable:s,value:n.value}),Object.defineProperty(a,e,{enumerable:s,value:n.value.$path})):(s=void 0===r.enumerable||!!r.enumerable,Object.defineProperty(u,e,{enumerable:s,get:function(){return n.value},set:function(e){n.value=e}}),Object.defineProperty(a,e,{enumerable:s,get:function(){return n}}))}),Object.defineProperties(u,{$onBeforeChanges:{enumerable:!1,value:this.onBeforeChanges.bind(this)},$onBeforeChange:{enumerable:!1,value:this.onBeforeChange.bind(this)},$offBeforeChanges:{enumerable:!1,value:this.offBeforeChanges.bind(this)},$offBeforeChange:{enumerable:!1,value:this.offBeforeChange.bind(this)},$onChanges:{enumerable:!1,value:this.onChanges.bind(this)},$onChange:{enumerable:!1,value:this.onChange.bind(this)},$offChanges:{enumerable:!1,value:this.offChanges.bind(this)},$offChange:{enumerable:!1,value:this.offChange.bind(this)}})}Q.prototype=Object.create(z.prototype);var Z=function(e,t,n,r){var i=new G(e,t,n,r);return i.type="tabs",i},K=J;function J(e,t,n,r){if(!(this instanceof J))return new J(e,t,n,r);t=void 0===t?null:t,z.call(this,e,t,r,n),this.options=n.options,this.type="select"}function ee(e,t){return new G("",e,t).value}return J.prototype=Object.create(z.prototype),ee.Slider=function(e,t){return new M(null,e,t)},ee.Textinput=function(e,t){return new N(null,e,t)},ee.Select=function(e,t){return new K(null,e,t)},ee.Checkbox=function(e,t){return new q(null,e,t)},ee.Color=function(e,t){return new H(null,e,t)},ee.Section=function(e,t){return new G(null,e,t)},ee.Tabs=function(e,t){return new Z(null,e,t)},ee.Raw=function(e,t){return new F(null,e,t)},ee},"object"==typeof n&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):(i=i||self).ControlsState=o()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:50}],9:[function(e,t,n){"use strict";var r=e("type/value/is"),i=e("type/plain-function/is"),o=e("es5-ext/object/assign"),a=e("es5-ext/object/normalize-options"),u=e("es5-ext/string/#/contains");(t.exports=function(e,t){var n,i,s,f,c;return arguments.length<2||"string"!=typeof e?(f=t,t=e,e=null):f=arguments[2],r(e)?(n=u.call(e,"c"),i=u.call(e,"e"),s=u.call(e,"w")):(n=s=!0,i=!1),c={value:t,configurable:n,enumerable:i,writable:s},f?o(a(f),c):c}).gs=function(e,t,n){var s,f,c,l;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],r(t)?i(t)?r(n)?i(n)||(c=n,n=void 0):n=void 0:(c=t,t=n=void 0):t=void 0,r(e)?(s=u.call(e,"c"),f=u.call(e,"e")):(s=!0,f=!1),l={get:t,set:n,configurable:s,enumerable:f},c?o(a(c),l):l}},{"es5-ext/object/assign":11,"es5-ext/object/normalize-options":18,"es5-ext/string/#/contains":21,"type/plain-function/is":54,"type/value/is":56}],10:[function(e,t,n){"use strict";t.exports=function(){}},{}],11:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":12,"./shim":13}],12:[function(e,t,n){"use strict";t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],13:[function(e,t,n){"use strict";var r=e("../keys"),i=e("../valid-value"),o=Math.max;t.exports=function(e,t){var n,a,u,s=o(arguments.length,2);for(e=Object(i(e)),u=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},a=1;a<s;++a)t=arguments[a],r(t).forEach(u);if(void 0!==n)throw n;return e}},{"../keys":15,"../valid-value":20}],14:[function(e,t,n){"use strict";var r=e("../function/noop")();t.exports=function(e){return e!==r&&null!==e}},{"../function/noop":10}],15:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(e,t,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],17:[function(e,t,n){"use strict";var r=e("../is-value"),i=Object.keys;t.exports=function(e){return i(r(e)?Object(e):e)}},{"../is-value":14}],18:[function(e,t,n){"use strict";var r=e("./is-value"),i=Array.prototype.forEach,o=Object.create;t.exports=function(e){var t=o(null);return i.call(arguments,function(e){r(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},{"./is-value":14}],19:[function(e,t,n){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],20:[function(e,t,n){"use strict";var r=e("./is-value");t.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},{"./is-value":14}],21:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":22,"./shim":23}],22:[function(e,t,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},{}],23:[function(e,t,n){"use strict";var r=String.prototype.indexOf;t.exports=function(e){return r.call(this,e,arguments[1])>-1}},{}],24:[function(e,t,n){"use strict";var r,i,o,a,u,s,f,c=e("d"),l=e("es5-ext/object/valid-callable"),p=Function.prototype.apply,h=Function.prototype.call,d=Object.create,g=Object.defineProperty,m=Object.defineProperties,v=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};i=function(e,t){var n,i;return l(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},u={on:r=function(e,t){var n;return l(t),v.call(this,"__ee__")?n=this.__ee__:(n=b.value=d(null),g(this,"__ee__",b),b.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:i,off:o=function(e,t){var n,r,i,o;if(l(t),!v.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(r=n[e]))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},emit:a=function(e){var t,n,r,i,o;if(v.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)p.call(r,this,o)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];p.call(i,this,o)}}},s={on:c(r),once:c(i),off:c(o),emit:c(a)},f=m({},s),t.exports=n=function(e){return null==e?d(f):m(Object(e),s)},n.methods=u},{d:9,"es5-ext/object/valid-callable":19}],25:[function(e,t,n){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],26:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],27:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],f=t[7],c=t[8],l=t[9],p=t[10],h=t[11],d=t[12],g=t[13],m=t[14],v=t[15],b=n*u-r*a,y=n*s-i*a,w=n*f-o*a,x=r*s-i*u,_=r*f-o*u,A=i*f-o*s,E=c*g-l*d,C=c*m-p*d,k=c*v-h*d,O=l*m-p*g,T=l*v-h*g,j=p*v-h*m,S=b*j-y*T+w*O+x*k-_*C+A*E;if(!S)return null;return S=1/S,e[0]=(u*j-s*T+f*O)*S,e[1]=(i*T-r*j-o*O)*S,e[2]=(g*A-m*_+v*x)*S,e[3]=(p*_-l*A-h*x)*S,e[4]=(s*k-a*j-f*C)*S,e[5]=(n*j-i*k+o*C)*S,e[6]=(m*w-d*A-v*y)*S,e[7]=(c*A-p*w+h*y)*S,e[8]=(a*T-u*k+f*E)*S,e[9]=(r*k-n*T-o*E)*S,e[10]=(d*_-g*w+v*b)*S,e[11]=(l*w-c*_-h*b)*S,e[12]=(u*C-a*O-s*E)*S,e[13]=(n*O-r*C+i*E)*S,e[14]=(g*y-d*x-m*b)*S,e[15]=(c*x-l*y+p*b)*S,e}},{}],28:[function(e,t,n){var r=e("./identity");t.exports=function(e,t,n,i){var o,a,u,s,f,c,l,p,h,d,g=t[0],m=t[1],v=t[2],b=i[0],y=i[1],w=i[2],x=n[0],_=n[1],A=n[2];if(Math.abs(g-x)<1e-6&&Math.abs(m-_)<1e-6&&Math.abs(v-A)<1e-6)return r(e);l=g-x,p=m-_,h=v-A,d=1/Math.sqrt(l*l+p*p+h*h),o=y*(h*=d)-w*(p*=d),a=w*(l*=d)-b*h,u=b*p-y*l,(d=Math.sqrt(o*o+a*a+u*u))?(o*=d=1/d,a*=d,u*=d):(o=0,a=0,u=0);s=p*u-h*a,f=h*o-l*u,c=l*a-p*o,(d=Math.sqrt(s*s+f*f+c*c))?(s*=d=1/d,f*=d,c*=d):(s=0,f=0,c=0);return e[0]=o,e[1]=s,e[2]=l,e[3]=0,e[4]=a,e[5]=f,e[6]=p,e[7]=0,e[8]=u,e[9]=c,e[10]=h,e[11]=0,e[12]=-(o*g+a*m+u*v),e[13]=-(s*g+f*m+c*v),e[14]=-(l*g+p*m+h*v),e[15]=1,e}},{"./identity":26}],29:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],f=t[6],c=t[7],l=t[8],p=t[9],h=t[10],d=t[11],g=t[12],m=t[13],v=t[14],b=t[15],y=n[0],w=n[1],x=n[2],_=n[3];return e[0]=y*r+w*u+x*l+_*g,e[1]=y*i+w*s+x*p+_*m,e[2]=y*o+w*f+x*h+_*v,e[3]=y*a+w*c+x*d+_*b,y=n[4],w=n[5],x=n[6],_=n[7],e[4]=y*r+w*u+x*l+_*g,e[5]=y*i+w*s+x*p+_*m,e[6]=y*o+w*f+x*h+_*v,e[7]=y*a+w*c+x*d+_*b,y=n[8],w=n[9],x=n[10],_=n[11],e[8]=y*r+w*u+x*l+_*g,e[9]=y*i+w*s+x*p+_*m,e[10]=y*o+w*f+x*h+_*v,e[11]=y*a+w*c+x*d+_*b,y=n[12],w=n[13],x=n[14],_=n[15],e[12]=y*r+w*u+x*l+_*g,e[13]=y*i+w*s+x*p+_*m,e[14]=y*o+w*f+x*h+_*v,e[15]=y*a+w*c+x*d+_*b,e}},{}],30:[function(e,t,n){t.exports=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}},{}],31:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],32:[function(e,t,n){t.exports=function(e,t,n){var r,i,o,a,u,s,f,c,l,p,h,d,g=n[0],m=n[1],v=n[2];t===e?(e[12]=t[0]*g+t[4]*m+t[8]*v+t[12],e[13]=t[1]*g+t[5]*m+t[9]*v+t[13],e[14]=t[2]*g+t[6]*m+t[10]*v+t[14],e[15]=t[3]*g+t[7]*m+t[11]*v+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],f=t[6],c=t[7],l=t[8],p=t[9],h=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=s,e[6]=f,e[7]=c,e[8]=l,e[9]=p,e[10]=h,e[11]=d,e[12]=r*g+u*m+l*v+t[12],e[13]=i*g+s*m+p*v+t[13],e[14]=o*g+f*m+h*v+t[14],e[15]=a*g+c*m+d*v+t[15]);return e}},{}],33:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},{}],34:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{}],35:[function(e,t,n){t.exports=1e-6},{}],36:[function(e,t,n){t.exports=function(e,t){var n=e[0],i=e[1],o=e[2],a=t[0],u=t[1],s=t[2];return Math.abs(n-a)<=r*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-u)<=r*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-s)<=r*Math.max(1,Math.abs(o),Math.abs(s))};var r=e("./epsilon")},{"./epsilon":35}],37:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o);return e}},{}],38:[function(e,t,n){t.exports=function(e,t,n,r){var i=n[1],o=n[2],a=t[1]-i,u=t[2]-o,s=Math.sin(r),f=Math.cos(r);return e[0]=t[0],e[1]=i+a*f-u*s,e[2]=o+a*s+u*f,e}},{}],39:[function(e,t,n){t.exports=function(e,t,n,r){var i=n[0],o=n[2],a=t[0]-i,u=t[2]-o,s=Math.sin(r),f=Math.cos(r);return e[0]=i+u*s+a*f,e[1]=t[1],e[2]=o+u*f-a*s,e}},{}],40:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}},{}],41:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}},{}],42:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,f=s>>1,c=-7,l=n?i-1:0,p=n?-1:1,h=e[t+l];for(l+=p,o=h&(1<<-c)-1,h>>=-c,c+=u;c>0;o=256*o+e[t+l],l+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+l],l+=p,c-=8);if(0===o)o=1-f;else{if(o===s)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=f}return(h?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,u,s,f=8*o-i-1,c=(1<<f)-1,l=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+l>=1?p/s:p*Math.pow(2,1-l))*s>=2&&(a++,s/=2),a+l>=c?(u=0,a=c):a+l>=1?(u=(t*s-1)*Math.pow(2,i),a+=l):(u=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&u,h+=d,u/=256,i-=8);for(a=a<<i|u,f+=i;f>0;e[n+h]=255&a,h+=d,a/=256,f-=8);e[n+h-d]|=128*g}},{}],43:[function(e,t,n){"use strict";var r=e("gl-vec3/transformMat4"),i=e("gl-vec3/rotateY"),o=e("gl-vec3/rotateX"),a=e("gl-vec3/equals"),u=e("gl-vec3/add"),s=e("gl-vec3/scaleAndAdd"),f=e("gl-vec3/copy"),c=e("gl-vec3/normalize"),l=e("gl-mat4/identity"),p=e("gl-mat4/invert"),h=e("gl-mat4/translate"),d=e("gl-mat4/scale"),g=e("gl-mat4/lookAt"),m=e("gl-mat4/perspective"),v=.5*Math.PI-1e-4,b=.5*-Math.PI+1e-4;t.exports=function(e){var t=!0,n={aspectRatio:(e=e||{}).aspectRatio?e.aspectRatio:1,zoomAboutCursor:void 0===e.zoomAboutCursor||e.zoomAboutCursor,distance:void 0===e.distance?10:e.distance,phi:void 0===e.phi?0:e.phi,theta:void 0===e.theta?0:e.theta,fovY:void 0===e.fovY?Math.PI/4:e.fovY,near:void 0===e.near?.1:e.near,far:void 0===e.far?100:e.far,panDecayTime:e.panDecayTime||100,zoomDecayTime:e.zoomDecayTime||100,rotationDecayTime:e.rotationDecayTime||100,dirty:!0,up:e.up||new Float32Array([0,1,0]),center:e.center||new Float32Array(3),rotationCenter:e.rotationCenter||e.center&&e.center.slice()||new Float32Array(3),zoom:0,panX:0,panY:0,panZ:0,pitch:0,yaw:0,dTheta:0,dPhi:0,mouseX:0,mouseY:0},y=null,w={tick:function(e){if(F.zoom&&(n.zoom=F.zoom),F.dTheta&&(n.dTheta=F.dTheta),F.dPhi&&(n.dPhi=F.dPhi),F.panX&&(n.panX=F.panX),F.panY&&(n.panY=F.panY),F.panZ&&(n.panZ=F.panZ),F.yaw&&(n.yaw=F.yaw),F.pitch&&(n.pitch=F.pitch),D(F),e){var r=n.dPhi,i=n.dTheta,o=n.zoom,u=n.panX,s=n.panY,f=n.panZ,c=n.pitch,l=n.yaw;Object.assign(n,e),void 0!==e.dPhi&&(n.dPhi+=r),void 0!==e.dTheta&&(n.dTheta+=i),void 0!==e.zoom&&(n.zoom+=o),void 0!==e.panX&&(n.panX+=u),void 0!==e.panY&&(n.panY+=s),void 0!==e.panZ&&(n.panZ+=f),void 0!==e.pitch&&(n.pitch+=c),void 0!==e.yaw&&(n.yaw+=l)}a(n.up,O.up)&&a(n.center,O.center)&&n.near===O.near&&n.far===O.far&&n.phi===O.phi&&n.theta===O.theta&&n.distance===O.distance&&n.fovY===O.fovY||(j.dPhi=n.phi-O.phi,j.dTheta=n.theta-O.theta,j.zoom=n.distance/O.distance-1,n.theta=O.theta,n.distance=O.distance,n.phi=O.phi,j.yaw=0,j.pitch=0,j.panX=0,j.panY=0,j.panZ=0,j.mouseX=0,j.mouseY=0,P(j)),!function(){if(Math.abs(n.zoom)>1e-4)return!0;if(Math.abs(n.panX)>1e-4)return!0;if(Math.abs(n.panY)>1e-4)return!0;if(Math.abs(n.panZ)>1e-4)return!0;if(Math.abs(n.dTheta)>1e-4)return!0;if(Math.abs(n.dPhi)>1e-4)return!0;if(Math.abs(n.yaw)>1e-4)return!0;if(Math.abs(n.pitch)>1e-4)return!0}()?D(n):P(n);var p,h,d,g,m=Date.now();null!==y&&(p=m-y,h=n.panDecayTime?Math.exp(-p/n.panDecayTime/Math.LN2):0,d=n.zoomDecayTime?Math.exp(-p/n.zoomDecayTime/Math.LN2):0,g=n.rotationDecayTime?Math.exp(-p/n.rotationDecayTime/Math.LN2):0,n.zoom*=d,n.panX*=h,n.panY*=h,n.panZ*=h,n.dTheta*=g,n.dPhi*=g,n.yaw*=g,n.pitch*=g),y=m,w.state.dirty=t,t=!1,T()},taint:B,resize:z,params:n,rotate:function(e,t){F.dTheta+=e,F.dPhi+=t},pivot:function(e,t){var r=w.params.fovY;F.yaw+=e*r*n.aspectRatio,F.pitch+=t*r},pan:function(e,t){var r=w.params.distance*Math.tan(.5*w.params.fovY)*2;return F.panX+=e*n.aspectRatio*r,F.panY+=t*r,w},zoom:function(e,t,r){return F.zoom+=r,n.mouseX=e,n.mouseY=t,w},state:{}};w.state.projection=new Float32Array(16),w.state.viewInv=new Float32Array(16),w.state.view=new Float32Array(16),w.state.width=null,w.state.height=null,w.state.eye=new Float32Array(3);var x=new Float32Array(3),_=new Float32Array(3),A=new Float32Array(3),E=new Float32Array(3),C=new Float32Array(3),k=new Float32Array(16),O={up:new Float32Array(3),center:new Float32Array(3)};function T(){f(O.up,n.up),f(O.center,n.center),O.near=n.near,O.far=n.far,O.distance=n.distance,O.phi=n.phi,O.theta=n.theta,O.fovY=n.fovY}T();var j={};function S(){w.state.eye[0]=0,w.state.eye[1]=0,w.state.eye[2]=n.distance,o(w.state.eye,w.state.eye,C,-n.phi),i(w.state.eye,w.state.eye,C,n.theta),u(w.state.eye,w.state.eye,n.center),g(w.state.view,w.state.eye,n.center,n.up),m(w.state.projection,n.fovY,w.params.aspectRatio,n.near,n.far),p(w.state.viewInv,w.state.view)}function B(){t=!0}function z(e){w.params.aspectRatio=e,S(),B()}function D(e){e.zoom=0,e.dTheta=0,e.dPhi=0,e.panX=0,e.panY=0,e.panZ=0,e.yaw=0,e.pitch=0}var F={};function P(e){var t;l(k),n.zoomAboutCursor&&(t=n.distance*Math.tan(.5*n.fovY),x[0]=e.mouseX*n.aspectRatio*t,x[1]=e.mouseY*t,x[2]=0,h(k,k,x)),x[0]=1+e.zoom,x[1]=1+e.zoom,x[2]=1,d(k,k,x),n.zoomAboutCursor&&(t=n.distance*Math.tan(.5*n.fovY),x[0]=-e.mouseX*n.aspectRatio*t,x[1]=-e.mouseY*t,x[2]=0,h(k,k,x)),k[12]-=.5*e.panX,k[13]-=.5*e.panY,r(n.center,n.center,w.state.view),r(n.center,n.center,k),r(n.center,n.center,w.state.viewInv),n.rotateAboutCenter&&f(n.rotationCenter,n.center),n.distance*=1+e.zoom;var a=n.phi;n.phi+=e.dPhi,n.phi=Math.min(v,Math.max(b,n.phi));var u=n.phi-a,p=n.theta;n.theta+=e.dTheta;var g=n.theta-p;if(i(n.center,n.center,n.rotationCenter,g-n.theta),o(n.center,n.center,n.rotationCenter,-u),i(n.center,n.center,n.rotationCenter,n.theta),0!==e.yaw||0!==e.pitch){A[0]=w.state.view[0],A[1]=w.state.view[4],A[2]=w.state.view[8],c(A,A),_[0]=w.state.view[1],_[1]=w.state.view[5],_[2]=w.state.view[9],c(_,_),E[0]=w.state.view[2],E[1]=w.state.view[6],E[2]=w.state.view[10],c(E,E);var m=Math.min(v,Math.max(b,n.phi+.5*e.pitch)),y=m-n.phi;s(n.center,n.center,A,-Math.sin(.5*e.yaw)*n.distance),s(n.center,n.center,_,-Math.sin(y)*n.distance),s(n.center,n.center,E,(2-Math.cos(.5*e.yaw)-Math.cos(y))*n.distance),n.phi=m,n.theta+=.5*e.yaw}S(),B()}return D(F),z(w.params.aspectRatio),w}},{"gl-mat4/identity":26,"gl-mat4/invert":27,"gl-mat4/lookAt":28,"gl-mat4/perspective":30,"gl-mat4/scale":31,"gl-mat4/translate":32,"gl-vec3/add":33,"gl-vec3/copy":34,"gl-vec3/equals":36,"gl-vec3/normalize":37,"gl-vec3/rotateX":38,"gl-vec3/rotateY":39,"gl-vec3/scaleAndAdd":40,"gl-vec3/transformMat4":41}],44:[function(e,t,n){var r=[],i=[],o="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function a(e,t){if(t=t||{},void 0===e)throw new Error(o);var n,a=!0===t.prepend?"prepend":"append",u=void 0!==t.container?t.container:document.querySelector("head"),s=r.indexOf(u);return-1===s&&(s=r.push(u)-1,i[s]={}),void 0!==i[s]&&void 0!==i[s][a]?n=i[s][a]:(n=i[s][a]=function(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}(),"prepend"===a?u.insertBefore(n,u.childNodes[0]):u.appendChild(n)),65279===e.charCodeAt(0)&&(e=e.substr(1,e.length)),n.styleSheet?n.styleSheet.cssText+=e:n.textContent+=e,n}t.exports=a,t.exports.insertCss=a},{}],45:[function(e,t,n){"use strict";t.exports=function(e,t){t||(t=e,e=window);var n=0,i=0,o=0,a={shift:!1,alt:!1,control:!1,meta:!1},u=!1;function s(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==a.alt,a.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==a.shift,a.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==a.control,a.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==a.meta,a.meta=!!e.metaKey),t}function f(e,u){var f=r.x(u),c=r.y(u);"buttons"in u&&(e=0|u.buttons),(e!==n||f!==i||c!==o||s(u))&&(n=0|e,i=f||0,o=c||0,t&&t(n,i,o,a))}function c(e){f(0,e)}function l(){(n||i||o||a.shift||a.alt||a.meta||a.control)&&(i=o=0,n=0,a.shift=a.alt=a.control=a.meta=!1,t&&t(0,0,0,a))}function p(e){s(e)&&t&&t(n,i,o,a)}function h(e){0===r.buttons(e)?f(0,e):f(n,e)}function d(e){f(n|r.buttons(e),e)}function g(e){f(n&~r.buttons(e),e)}function m(){u||(u=!0,e.addEventListener("mousemove",h),e.addEventListener("mousedown",d),e.addEventListener("mouseup",g),e.addEventListener("mouseleave",c),e.addEventListener("mouseenter",c),e.addEventListener("mouseout",c),e.addEventListener("mouseover",c),e.addEventListener("blur",l),e.addEventListener("keyup",p),e.addEventListener("keydown",p),e.addEventListener("keypress",p),e!==window&&(window.addEventListener("blur",l),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}m();var v={element:e};return Object.defineProperties(v,{enabled:{get:function(){return u},set:function(t){t?m():u&&(u=!1,e.removeEventListener("mousemove",h),e.removeEventListener("mousedown",d),e.removeEventListener("mouseup",g),e.removeEventListener("mouseleave",c),e.removeEventListener("mouseenter",c),e.removeEventListener("mouseout",c),e.removeEventListener("mouseover",c),e.removeEventListener("blur",l),e.removeEventListener("keyup",p),e.removeEventListener("keydown",p),e.removeEventListener("keypress",p),e!==window&&(window.removeEventListener("blur",l),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),v};var r=e("mouse-event")},{"mouse-event":47}],46:[function(e,t,n){var r={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var i=e.clientX||0,o=e.clientY||0,a=(u=t,u===window||u===document||u===document.body?r:u.getBoundingClientRect());var u;return n[0]=i-a.left,n[1]=o-a.top,n}},{}],47:[function(e,t,n){"use strict";function r(e){return e.target||e.srcElement||window}n.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},n.element=r,n.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=r(e).getBoundingClientRect();return e.clientX-t.left}return 0},n.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=r(e).getBoundingClientRect();return e.clientY-t.top}return 0}},{}],48:[function(e,t,n){"use strict";t.exports=function(e){e=e||window;var t,n,a,u,s=o(),f=[null,null],c=[null,null],l=[null,null],p=[null,null],h=0,d={},g=e===window?function(){t=window.innerWidth,n=window.innerHeight}:function(){t=e.clientWidth,n=e.clientHeight},m=0,v={},b=r(e,function(e,t,n,r){a=t,u=n,m=e,v=r});function y(r){i(r,e,l),g(),d.buttons=m,d.mods=v,d.x0=d.x=d.x1=2*l[0]/t-1,d.y0=d.y=d.y1=1-2*l[1]/n,d.x2=null,d.y2=null,d.dx=2*r.deltaX/t,d.dy=-2*r.deltaY/n,d.dz=2*r.deltaZ/t,d.active=1,d.zoomx=1,d.zoomy=1,d.theta=0,d.dtheta=0,d.originalEvent=r,s.emit("wheel",d),f[0]=l[0],f[1]=l[1]}var w=null,x=null,_=0;function A(r){i(r,e,l),_=0,g(),d.buttons=m,d.mods=v,d.x=d.x1=2*l[0]/t-1,d.y=d.y1=1-2*l[1]/n,d.x2=null,d.y2=null,d.active=_,d.x0=2*w/t-1,d.y0=1-2*x/n,d.dx=0,d.dy=0,d.dz=0,d.zoomx=1,d.zoomy=1,d.theta=0,d.dtheta=0,d.originalEvent=r,s.emit("mouseup",d),w=x=null,f[0]=l[0],f[1]=l[1]}function E(r){i(r,e,l),_=1,g(),w=a,x=u,d.buttons=m,d.mods=v,d.x=d.x0=d.x1=2*l[0]/t-1,d.y=d.y0=d.y1=1-2*l[1]/n,d.x2=null,d.y2=null,d.active=_,d.dx=0,d.dy=0,d.dz=0,d.zoomx=1,d.zoomy=1,d.theta=0,d.dtheta=0,d.originalEvent=r,s.emit("mousedown",d),f[0]=l[0],f[1]=l[1]}function C(r){i(r,e,l),g(),d.buttons=m,d.mods=v,d.x0=2*w/t-1,d.y0=1-2*x/n,d.x=d.x1=2*l[0]/t-1,d.y=d.y1=1-2*l[1]/n,d.x2=null,d.y2=null,d.dx=2*(l[0]-f[0])/t,d.dy=-2*(l[1]-f[1])/n,d.active=_,d.dz=0,d.zoomx=1,d.zoomy=1,d.theta=0,d.dtheta=0,d.originalEvent=r,s.emit("mousemove",d),f[0]=l[0],f[1]=l[1]}function k(e){for(var t=e.identifier,n=0;n<p.length;n++)if(p[n]&&p[n].touch&&p[n].touch.identifier===t)return n;return-1}function O(r){c[0]=null,c[1]=null;for(var o=0;o<r.changedTouches.length;o++){var a=r.changedTouches[o],u=a.identifier,f=k(u);if(-1===f&&h<2){var l=p[0]?1:0,m=p[0]?0:1,v={position:[0,0],touch:null};p[l]=v,h++,v.touch=a,i(a,e,v.position);p[m]&&p[m].touch}}for(var b=0,y=0,_=0,o=0;o<p.length;o++)p[o]&&(b+=p[o].position[0],y+=p[o].position[1],_++);if(b/=_,y/=_,h>0){if(d.theta=0,_>1){var A=p[1].position[0]-p[0].position[0],E=(p[0].position[1]-p[1].position[1])*t/n;d.theta=Math.atan2(E,A)}g(),d.buttons=0,d.mods={},d.active=h,w=b,x=y,d.x0=2*w/t-1,d.y0=1-2*x/n,d.x=2*b/t-1,d.y=1-2*y/n,d.x1=2*p[0].position[0]/t-1,d.y1=1-2*p[0].position[1]/n,h>1&&(d.x2=2*p[1].position[0]/t-1,d.y2=1-2*p[1].position[1]/n),d.active=h,d.dx=0,d.dy=0,d.dz=0,d.zoomx=1,d.zoomy=1,d.dtheta=0,d.originalEvent=r,s.emit(1===h?"touchstart":"pinchstart",d)}}function T(r){for(var o,a=!1,u=0;u<r.changedTouches.length;u++){var f=r.changedTouches[u];-1!==(o=k(f))&&(a=!0,p[o].touch=f,i(f,e,p[o].position))}if(a)if(1===h){for(o=0;o<p.length&&!p[o];o++);if(p[o]&&c[o]){var l=p[o].position[0],g=p[o].position[1],m=l-c[o][0],b=g-c[o][1];d.buttons=0,d.mods={},d.active=h,d.x=d.x1=2*l/t-1,d.y=d.y1=1-2*g/n,d.x2=null,d.y2=null,d.x0=2*w/t-1,d.y0=1-2*x/n,d.dx=2*m/t,d.dy=-2*b/n,d.dz=0,d.zoomx=1,d.zoomy=1,d.theta=0,d.dtheta=0,d.originalEvent=r,s.emit("touchmove",d)}}else if(2===h&&c[0]&&c[1]){var y=c[0],_=c[1],A=_[0]-y[0],E=(_[1]-y[1])*t/n,C=p[0].position,O=p[1].position,T=O[0]-C[0],j=(C[1]-O[1])*t/n,S=.5*Math.sqrt(A*A+E*E),B=Math.atan2(E,A),z=.5*Math.sqrt(T*T+j*j),D=Math.atan2(j,T),F=.5*(_[0]+y[0]),P=.5*(_[1]+y[1]),m=.5*(O[0]+C[0]-y[0]-_[0]),b=.5*(O[1]+C[1]-y[1]-_[1]),M=z/S,L=D-B;d.buttons=0,d.mods=v,d.active=h,d.x=2*F/t-1,d.y=1-2*P/n,d.x0=2*w/t-1,d.y0=1-2*x/n,d.x1=2*C[0]/t-1,d.y1=1-2*C[1]/n,d.x2=2*O[0]/t-1,d.y2=1-2*O[1]/n,d.dx=2*m/t,d.dy=-2*b/n,d.dz=0,d.zoomx=M,d.zoomy=M,d.theta=D,d.dtheta=L,d.originalEvent=r,s.emit("pinchmove",d)}p[0]&&(c[0]=p[0].position.slice()),p[1]&&(c[1]=p[1].position.slice())}function j(e){for(var r,i=0;i<e.changedTouches.length;i++){var o=e.changedTouches[i],a=k(o);if(-1!==a){r=p[a],p[a]=null,h--;var u=0===a?1:0;p[u]&&p[u].touch}}var f=0,c=0;if(0===h)r&&(f=r.position[0],c=r.position[1]);else{for(var l=0,i=0;i<p.length;i++)p[i]&&(f+=p[i].position[0],c+=p[i].position[1],l++);f/=l,c/=l}h<2&&(d.buttons=0,d.mods=v,d.active=h,d.x=2*f/t-1,d.y=1-2*c/n,d.x0=2*w/t-1,d.y0=1-2*x/n,d.dx=0,d.dy=0,d.dz=0,d.zoomx=1,d.zoomy=1,d.theta=0,d.dtheta=0,d.originalEvent=e,s.emit(0===h?"touchend":"pinchend",d)),0===h&&(w=x=null)}var S=!1;function B(){S||(S=!0,b.enabled=!0,e.addEventListener("wheel",y,!1),e.addEventListener("mousedown",E,!1),window.addEventListener("mousemove",C,!1),window.addEventListener("mouseup",A,!1),e.addEventListener("touchstart",O,!1),window.addEventListener("touchmove",T,!1),window.addEventListener("touchend",j,!1),window.addEventListener("touchcancel",j,!1))}return B(),s.enable=B,s.disable=function(){S&&(S=!1,b.enabled=!1,e.removeEventListener("wheel",y,!1),e.removeEventListener("mousedown",E,!1),window.removeEventListener("mousemove",C,!1),window.removeEventListener("mouseup",A,!1),e.removeEventListener("touchstart",O,!1),window.removeEventListener("touchmove",T,!1),window.removeEventListener("touchend",j,!1),window.removeEventListener("touchcancel",j,!1))},s};var r=e("mouse-change"),i=e("mouse-event-offset"),o=e("event-emitter")},{"event-emitter":24,"mouse-change":45,"mouse-event-offset":46}],49:[function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,u=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var f in n=Object(arguments[s]))i.call(n,f)&&(u[f]=n[f]);if(r){a=r(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(u[a[c]]=n[a[c]])}}return u}},{}],50:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:u}catch(e){i=u}}();var f,c=[],l=!1,p=-1;function h(){l&&f&&(l=!1,f.length?c=f.concat(c):p=-1,c.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(f=c,c=[];++p<t;)f&&f[p].run();p=-1,t=c.length}f=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===u||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new g(e,t)),1!==c.length||l||s(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],51:[function(e,t,n){var r,i;r=this,i=function(){function e(e,t){this.id=U++,this.type=e,this.data=t}function t(e){return"["+function e(t){if(0===t.length)return[];var n=t.charAt(0),r=t.charAt(t.length-1);if(1<t.length&&n===r&&('"'===n||"'"===n))return['"'+t.substr(1,t.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(n=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t))return e(t.substr(0,n.index)).concat(e(n[1])).concat(e(t.substr(n.index+n[0].length)));if(1===(n=t.split(".")).length)return['"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(t=[],r=0;r<n.length;++r)t=t.concat(e(n[r]));return t}(e).join("][")+"]"}function n(e){return"string"==typeof e?e.split():e}function r(e){return"string"==typeof e?document.querySelector(e):e}function i(e){var t,i,o,a,u=e||{};e={};var s=[],f=[],c="undefined"==typeof window?1:window.devicePixelRatio,l=!1,p=function(e){},h=function(){};if("string"==typeof u?t=document.querySelector(u):"object"==typeof u&&("string"==typeof u.nodeName&&"function"==typeof u.appendChild&&"function"==typeof u.getBoundingClientRect?t=u:"function"==typeof u.drawArrays||"function"==typeof u.drawElements?o=(a=u).canvas:("gl"in u?a=u.gl:"canvas"in u?o=r(u.canvas):"container"in u&&(i=r(u.container)),"attributes"in u&&(e=u.attributes),"extensions"in u&&(s=n(u.extensions)),"optionalExtensions"in u&&(f=n(u.optionalExtensions)),"onDone"in u&&(p=u.onDone),"profile"in u&&(l=!!u.profile),"pixelRatio"in u&&(c=+u.pixelRatio))),t&&("canvas"===t.nodeName.toLowerCase()?o=t:i=t),!a){if(!o){if(!(t=function(e,t,n){function r(){var t=window.innerWidth,r=window.innerHeight;e!==document.body&&(t=(r=e.getBoundingClientRect()).right-r.left,r=r.bottom-r.top),o.width=n*t,o.height=n*r,N(o.style,{width:t+"px",height:r+"px"})}var i,o=document.createElement("canvas");return N(o.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(o),e===document.body&&(o.style.position="absolute",N(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver(function(){setTimeout(r)})).observe(e):window.addEventListener("resize",r,!1),r(),{canvas:o,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",r),e.removeChild(o)}}}(i||document.body,0,c)))return null;o=t.canvas,h=t.onDestroy}void 0===e.premultipliedAlpha&&(e.premultipliedAlpha=!0),a=function(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,e)}return a?{gl:a,canvas:o,container:i,extensions:s,optionalExtensions:f,pixelRatio:c,profile:l,onDone:p,onDestroy:h}:(h(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function o(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function a(e){var t,n;return t=(65535<e)<<4,t|=n=(255<(e>>>=t))<<3,(t|=n=(15<(e>>>=n))<<2)|(n=(3<(e>>>=n))<<1)|e>>>n>>1}function u(){function e(e){e:{for(var t=16;268435456>=t;t*=16)if(e<=t){e=t;break e}e=0}return 0<(t=n[a(e)>>2]).length?t.pop():new ArrayBuffer(e)}function t(e){n[a(e.byteLength)>>2].push(e)}var n=o(8,function(){return[]});return{alloc:e,free:t,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(e){t(e.buffer)}}}function s(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||$(e.data))}function f(e,t,n,r,i,o){for(var a=0;a<t;++a)for(var u=e[a],s=0;s<n;++s)for(var f=u[s],c=0;c<r;++c)i[o++]=f[c]}function c(e){return 0|Q[Object.prototype.toString.call(e)]}function l(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function p(e,t,n,r,i,o,a){for(var u=0,s=0;s<n;++s)for(var f=0;f<r;++f)e[u++]=t[i*s+o*f+a]}function h(e,t,n,r){function i(t){this.id=f++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,n.profile&&(this.stats={size:0})}function o(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function a(e,t,n,r,i,a){if(e.usage=n,Array.isArray(t)){if(e.dtype=r||5126,0<t.length)if(Array.isArray(t[0])){i=ee(t);for(var u=r=1;u<i.length;++u)r*=i[u];e.dimension=r,o(e,t=J(t,i,e.dtype),n),a?e.persistentData=t:W.freeType(t)}else"number"==typeof t[0]?(e.dimension=i,l(i=W.allocType(e.dtype,t.length),t),o(e,i,n),a?e.persistentData=i:W.freeType(i)):$(t[0])&&(e.dimension=t[0].length,e.dtype=r||c(t[0])||5126,o(e,t=J(t,[t.length,t[0].length],e.dtype),n),a?e.persistentData=t:W.freeType(t))}else if($(t))e.dtype=r||c(t),e.dimension=i,o(e,t,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(s(t)){i=t.shape;var f=t.stride,h=(u=t.offset,0),d=0,g=0,m=0;1===i.length?(h=i[0],d=1,g=f[0],m=0):2===i.length&&(h=i[0],d=i[1],g=f[0],m=f[1]),e.dtype=r||c(t.data)||5126,e.dimension=d,p(i=W.allocType(e.dtype,h*d),t.data,h,d,g,m,u),o(e,i,n),a?e.persistentData=i:W.freeType(i)}else t instanceof ArrayBuffer&&(e.dtype=5121,e.dimension=i,o(e,t,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(t))))}function u(n){t.bufferCount--,r(n),e.deleteBuffer(n.buffer),n.buffer=null,delete h[n.id]}var f=0,h={};i.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){u(this)};var d=[];return n.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(h).forEach(function(t){e+=h[t].stats.size}),e}),{create:function(r,o,f,d){function g(t){var r=35044,i=null,o=0,u=0,f=1;return Array.isArray(t)||$(t)||s(t)||t instanceof ArrayBuffer?i=t:"number"==typeof t?o=0|t:t&&("data"in t&&(i=t.data),"usage"in t&&(r=K[t.usage]),"type"in t&&(u=Z[t.type]),"dimension"in t&&(f=0|t.dimension),"length"in t&&(o=0|t.length)),m.bind(),i?a(m,i,r,u,f,d):(o&&e.bufferData(m.type,o,r),m.dtype=u||5121,m.usage=r,m.dimension=f,m.byteLength=o),n.profile&&(m.stats.size=m.byteLength*te[m.dtype]),g}t.bufferCount++;var m=new i(o);return h[m.id]=m,f||g(r),g._reglType="buffer",g._buffer=m,g.subdata=function(t,n){var r,i=0|(n||0);if(m.bind(),$(t)||t instanceof ArrayBuffer)e.bufferSubData(m.type,i,t);else if(Array.isArray(t)){if(0<t.length)if("number"==typeof t[0]){var o=W.allocType(m.dtype,t.length);l(o,t),e.bufferSubData(m.type,i,o),W.freeType(o)}else(Array.isArray(t[0])||$(t[0]))&&(r=ee(t),o=J(t,r,m.dtype),e.bufferSubData(m.type,i,o),W.freeType(o))}else if(s(t)){r=t.shape;var a=t.stride,u=o=0,f=0,h=0;1===r.length?(o=r[0],u=1,f=a[0],h=0):2===r.length&&(o=r[0],u=r[1],f=a[0],h=a[1]),r=Array.isArray(t.data)?m.dtype:c(t.data),p(r=W.allocType(r,o*u),t.data,o,u,f,h,t.offset),e.bufferSubData(m.type,i,r),W.freeType(r)}return g},n.profile&&(g.stats=m.stats),g.destroy=function(){u(m)},g},createStream:function(e,t){var n=d.pop();return n||(n=new i(e)),n.bind(),a(n,t,35040,0,1,!1),n},destroyStream:function(e){d.push(e)},clear:function(){X(h).forEach(u),d.forEach(u)},getBuffer:function(e){return e&&e._buffer instanceof i?e._buffer:null},restore:function(){X(h).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:a}}function d(e,t,n,r){function i(e){this.id=f++,u[this.id]=this,this.buffer=e,this.primType=4,this.type=this.vertCount=0}function o(r,i,o,a,u,f,c){var l;if(r.buffer.bind(),i?((l=c)||$(i)&&(!s(i)||$(i.data))||(l=t.oes_element_index_uint?5125:5123),n._initBuffer(r.buffer,i,o,l,3)):(e.bufferData(34963,f,o),r.buffer.dtype=l||5121,r.buffer.usage=o,r.buffer.dimension=3,r.buffer.byteLength=f),l=c,!c){switch(r.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125}r.buffer.dtype=l}r.type=l,0>(i=u)&&(i=r.buffer.byteLength,5123===l?i>>=1:5125===l&&(i>>=2)),r.vertCount=i,i=a,0>a&&(i=4,1===(a=r.buffer.dimension)&&(i=0),2===a&&(i=1),3===a&&(i=4)),r.primType=i}function a(e){r.elementsCount--,delete u[e.id],e.buffer.destroy(),e.buffer=null}var u={},f=0,c={uint8:5121,uint16:5123};t.oes_element_index_uint&&(c.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var l=[];return{create:function(e,t){function u(e){if(e)if("number"==typeof e)f(e),l.primType=4,l.vertCount=0|e,l.type=5121;else{var t=null,n=35044,r=-1,i=-1,a=0,p=0;Array.isArray(e)||$(e)||s(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(n=K[e.usage]),"primitive"in e&&(r=ne[e.primitive]),"count"in e&&(i=0|e.count),"type"in e&&(p=c[e.type]),"length"in e?a=0|e.length:(a=i,5123===p||5122===p?a*=2:5125!==p&&5124!==p||(a*=4))),o(l,t,n,r,i,a,p)}else f(),l.primType=4,l.vertCount=0,l.type=5121;return u}var f=n.create(null,34963,!0),l=new i(f._buffer);return r.elementsCount++,u(e),u._reglType="elements",u._elements=l,u.subdata=function(e,t){return f.subdata(e,t),u},u.destroy=function(){a(l)},u},createStream:function(e){var t=l.pop();return t||(t=new i(n.create(null,34963,!0,!1)._buffer)),o(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){l.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof i?e._elements:null},clear:function(){X(u).forEach(a)}}}function g(e){for(var t=W.allocType(5123,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(1/0===e[n])t[n]=31744;else if(-1/0===e[n])t[n]=64512;else{re[0]=e[n];var r=(o=ie[0])>>>31<<15,i=(o<<1>>>24)-127,o=o>>13&1023;t[n]=-24>i?r:-14>i?r+(o+1024>>-14-i):15<i?r+31744:r+(i+15<<10)+o}return t}function m(e){return Array.isArray(e)||$(e)}function v(e){return"[object "+e+"]"}function b(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function y(e){return!(!Array.isArray(e)||0===e.length||!m(e[0]))}function w(e){return Object.prototype.toString.call(e)}function x(e){if(!e)return!1;var t=w(e);return 0<=de.indexOf(t)||(b(e)||y(e)||s(e))}function _(e,t){36193===e.type?(e.data=g(t),W.freeType(t)):e.data=t}function A(e,t,n,r,i,o){if(e=void 0!==me[e]?me[e]:ue[e]*ge[t],o&&(e*=6),i){for(r=0;1<=n;)r+=e*n*n,n/=2;return r}return e*n*r}function E(e,t,n,r,i,o,a){function u(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function f(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function c(e,t){if("object"==typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=V[t.colorSpace]),"type"in t&&(e.type=q[t.type]);var n=e.width,r=e.height,i=e.channels,o=!1;"shape"in t?(n=t.shape[0],r=t.shape[1],3===t.shape.length&&(i=t.shape[2],o=!0)):("radius"in t&&(n=r=t.radius),"width"in t&&(n=t.width),"height"in t&&(r=t.height),"channels"in t&&(i=t.channels,o=!0)),e.width=0|n,e.height=0|r,e.channels=0|i,n=!1,"format"in t&&(n=t.format,r=e.internalformat=Y[n],e.format=de[r],n in q&&!("type"in t)&&(e.type=q[n]),n in Z&&(e.compressed=!0),n=!0),!o&&n?e.channels=ue[e.format]:o&&!n&&e.channels!==ae[e.format]&&(e.format=e.internalformat=ae[e.channels])}}function l(t){e.pixelStorei(37440,t.flipY),e.pixelStorei(37441,t.premultiplyAlpha),e.pixelStorei(37443,t.colorSpace),e.pixelStorei(3317,t.unpackAlignment)}function p(){u.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function h(e,t){var n=null;if(x(t)?n=t:t&&(c(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),x(t.data)&&(n=t.data)),t.copy){var r=i.viewportWidth,o=i.viewportHeight;e.width=e.width||r-e.xOffset,e.height=e.height||o-e.yOffset,e.needsCopy=!0}else if(n){if($(n))e.channels=e.channels||4,e.data=n,"type"in t||5121!==e.type||(e.type=0|Q[Object.prototype.toString.call(n)]);else if(b(n)){switch(e.channels=e.channels||4,o=(r=n).length,e.type){case 5121:case 5123:case 5125:case 5126:(o=W.allocType(e.type,o)).set(r),e.data=o;break;case 36193:e.data=g(r)}e.alignment=1,e.needsFree=!0}else if(s(n)){r=n.data,Array.isArray(r)||5121!==e.type||(e.type=0|Q[Object.prototype.toString.call(r)]);o=n.shape;var a,u,f,l,p=n.stride;3===o.length?(f=o[2],l=p[2]):l=f=1,a=o[0],u=o[1],o=p[0],p=p[1],e.alignment=1,e.width=a,e.height=u,e.channels=f,e.format=e.internalformat=ae[f],e.needsFree=!0,a=l,n=n.offset,f=e.width,l=e.height,u=e.channels;for(var h=W.allocType(36193===e.type?5126:e.type,f*l*u),d=0,v=0;v<l;++v)for(var A=0;A<f;++A)for(var E=0;E<u;++E)h[d++]=r[o*A+p*v+a*E+n];_(e,h)}else if(w(n)===se||w(n)===fe||w(n)===ce)w(n)===se||w(n)===fe?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(w(n)===le)e.element=n,e.width=n.width,e.height=n.height,e.channels=4;else if(w(n)===pe)e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if(w(n)===he)e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(y(n)){for(r=e.width||n[0].length,o=e.height||n.length,p=e.channels,p=m(n[0][0])?p||n[0][0].length:p||1,a=G.shape(n),f=1,l=0;l<a.length;++l)f*=a[l];f=W.allocType(36193===e.type?5126:e.type,f),G.flatten(n,a,"",f),_(e,f),e.alignment=1,e.width=r,e.height=o,e.channels=p,e.format=e.internalformat=ae[p],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4}function d(t,n,i,o,a){var u=t.element,s=t.data,f=t.internalformat,c=t.format,p=t.type,h=t.width,d=t.height;l(t),u?e.texSubImage2D(n,a,i,o,c,p,u):t.compressed?e.compressedTexSubImage2D(n,a,i,o,f,h,d,s):t.needsCopy?(r(),e.copyTexSubImage2D(n,a,i,o,t.xOffset,t.yOffset,h,d)):e.texSubImage2D(n,a,i,o,h,d,c,p,s)}function v(){return ge.pop()||new p}function E(e){e.needsFree&&W.freeType(e.data),p.call(e),ge.push(e)}function C(){u.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function k(e,t,n){var r=e.images[0]=v();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function O(e,t){var n=null;if(x(t))f(n=e.images[0]=v(),e),h(n,t),e.mipmask=1;else if(c(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)f(n=e.images[i]=v(),e),n.width>>=i,n.height>>=i,h(n,r[i]),e.mipmask|=1<<i;else f(n=e.images[0]=v(),e),h(n,t),e.mipmask=1;f(e,e.images[0])}function T(t,n){for(var i=t.images,o=0;o<i.length&&i[o];++o){var a=i[o],u=n,s=o,f=a.element,c=a.data,p=a.internalformat,h=a.format,d=a.type,g=a.width,m=a.height;l(a),f?e.texImage2D(u,s,h,h,d,f):a.compressed?e.compressedTexImage2D(u,s,p,g,m,0,c):a.needsCopy?(r(),e.copyTexImage2D(u,s,h,a.xOffset,a.yOffset,g,m,0)):e.texImage2D(u,s,h,g,m,0,h,d,c||null)}}function j(){var e=me.pop()||new C;u.call(e);for(var t=e.mipmask=0;16>t;++t)e.images[t]=null;return e}function S(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&E(t[n]),t[n]=null;me.push(e)}function B(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function z(e,t){"min"in t&&(e.minFilter=H[t.min],0<=oe.indexOf(e.minFilter)&&!("faces"in t)&&(e.genMipmaps=!0)),"mag"in t&&(e.magFilter=U[t.mag]);var n=e.wrapS,r=e.wrapT;if("wrap"in t){var i=t.wrap;"string"==typeof i?n=r=I[i]:Array.isArray(i)&&(n=I[i[0]],r=I[i[1]])}else"wrapS"in t&&(n=I[t.wrapS]),"wrapT"in t&&(r=I[t.wrapT]);if(e.wrapS=n,e.wrapT=r,"anisotropic"in t&&(e.anisotropic=t.anisotropic),"mipmap"in t){switch(n=!1,typeof t.mipmap){case"string":e.mipmapHint=R[t.mipmap],n=e.genMipmaps=!0;break;case"boolean":n=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,n=!0}!n||"min"in t||(e.minFilter=9984)}}function D(n,r){e.texParameteri(r,10241,n.minFilter),e.texParameteri(r,10240,n.magFilter),e.texParameteri(r,10242,n.wrapS),e.texParameteri(r,10243,n.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(r,34046,n.anisotropic),n.genMipmaps&&(e.hint(33170,n.mipmapHint),e.generateMipmap(r))}function F(t){u.call(this),this.mipmask=0,this.internalformat=6408,this.id=ve++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new B,a.profile&&(this.stats={size:0})}function P(t){e.activeTexture(33984),e.bindTexture(t.target,t.texture)}function M(){var t=we[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(3553,null)}function L(t){var n=t.texture,r=t.unit,i=t.target;0<=r&&(e.activeTexture(33984+r),e.bindTexture(i,null),we[r]=null),e.deleteTexture(n),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete be[t.id],o.textureCount--}var R={"don't care":4352,"dont care":4352,nice:4354,fast:4353},I={repeat:10497,clamp:33071,mirror:33648},U={nearest:9728,linear:9729},H=N({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},U),V={none:0,browser:37444},q={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Y={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Z={};t.ext_srgb&&(Y.srgb=35904,Y.srgba=35906),t.oes_texture_float&&(q.float32=q.float=5126),t.oes_texture_half_float&&(q.float16=q["half float"]=36193),t.webgl_depth_texture&&(N(Y,{depth:6402,"depth stencil":34041}),N(q,{uint16:5123,uint32:5125,"depth stencil":34042})),t.webgl_compressed_texture_s3tc&&N(Z,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),t.webgl_compressed_texture_atc&&N(Z,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),t.webgl_compressed_texture_pvrtc&&N(Z,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),t.webgl_compressed_texture_etc1&&(Z["rgb etc1"]=36196);var K=Array.prototype.slice.call(e.getParameter(34467));Object.keys(Z).forEach(function(e){var t=Z[e];0<=K.indexOf(t)&&(Y[e]=t)});var J=Object.keys(Y);n.textureFormats=J;var ee=[];Object.keys(Y).forEach(function(e){ee[Y[e]]=e});var te=[];Object.keys(q).forEach(function(e){te[q[e]]=e});var ne=[];Object.keys(U).forEach(function(e){ne[U[e]]=e});var re=[];Object.keys(H).forEach(function(e){re[H[e]]=e});var ie=[];Object.keys(I).forEach(function(e){ie[I[e]]=e});var de=J.reduce(function(e,n){var r=Y[n];return 6409===r||6406===r||6409===r||6410===r||6402===r||34041===r||t.ext_srgb&&(35904===r||35906===r)?e[r]=r:32855===r||0<=n.indexOf("rgba")?e[r]=6408:e[r]=6407,e},{}),ge=[],me=[],ve=0,be={},ye=n.maxTextureUnits,we=Array(ye).map(function(){return null});return N(F.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(0>t){for(var n=0;n<ye;++n){var r=we[n];if(r){if(0<r.bindCount)continue;r.unit=-1}we[n]=this,t=n;break}a.profile&&o.maxTextureUnits<t+1&&(o.maxTextureUnits=t+1),this.unit=t,e.activeTexture(33984+t),e.bindTexture(this.target,this.texture)}return t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&L(this)}}),a.profile&&(o.getTotalTextureSize=function(){var e=0;return Object.keys(be).forEach(function(t){e+=be[t].stats.size}),e}),{create2D:function(t,n){function r(e,t){var n=i.texInfo;B.call(n);var o=j();return"number"==typeof e?k(o,0|e,"number"==typeof t?0|t:0|e):e?(z(n,e),O(o,e)):k(o,1,1),n.genMipmaps&&(o.mipmask=(o.width<<1)-1),i.mipmask=o.mipmask,f(i,o),i.internalformat=o.internalformat,r.width=o.width,r.height=o.height,P(i),T(o,3553),D(n,3553),M(),S(o),a.profile&&(i.stats.size=A(i.internalformat,i.type,o.width,o.height,n.genMipmaps,!1)),r.format=ee[i.internalformat],r.type=te[i.type],r.mag=ne[n.magFilter],r.min=re[n.minFilter],r.wrapS=ie[n.wrapS],r.wrapT=ie[n.wrapT],r}var i=new F(3553);return be[i.id]=i,o.textureCount++,r(t,n),r.subimage=function(e,t,n,o){t|=0,n|=0,o|=0;var a=v();return f(a,i),a.width=0,a.height=0,h(a,e),a.width=a.width||(i.width>>o)-t,a.height=a.height||(i.height>>o)-n,P(i),d(a,3553,t,n,o),M(),E(a),r},r.resize=function(t,n){var o=0|t,u=0|n||o;if(o===i.width&&u===i.height)return r;r.width=i.width=o,r.height=i.height=u,P(i);for(var s=0;i.mipmask>>s;++s){var f=o>>s,c=u>>s;if(!f||!c)break;e.texImage2D(3553,s,i.format,f,c,0,i.format,i.type,null)}return M(),a.profile&&(i.stats.size=A(i.internalformat,i.type,o,u,!1,!1)),r},r._reglType="texture2d",r._texture=i,a.profile&&(r.stats=i.stats),r.destroy=function(){i.decRef()},r},createCube:function(t,n,r,i,u,s){function l(e,t,n,r,i,o){var u,s=p.texInfo;for(B.call(s),u=0;6>u;++u)g[u]=j();if("number"!=typeof e&&e){if("object"==typeof e)if(t)O(g[0],e),O(g[1],t),O(g[2],n),O(g[3],r),O(g[4],i),O(g[5],o);else if(z(s,e),c(p,e),"faces"in e)for(e=e.faces,u=0;6>u;++u)f(g[u],p),O(g[u],e[u]);else for(u=0;6>u;++u)O(g[u],e)}else for(e=0|e||1,u=0;6>u;++u)k(g[u],e,e);for(f(p,g[0]),p.mipmask=s.genMipmaps?(g[0].width<<1)-1:g[0].mipmask,p.internalformat=g[0].internalformat,l.width=g[0].width,l.height=g[0].height,P(p),u=0;6>u;++u)T(g[u],34069+u);for(D(s,34067),M(),a.profile&&(p.stats.size=A(p.internalformat,p.type,l.width,l.height,s.genMipmaps,!0)),l.format=ee[p.internalformat],l.type=te[p.type],l.mag=ne[s.magFilter],l.min=re[s.minFilter],l.wrapS=ie[s.wrapS],l.wrapT=ie[s.wrapT],u=0;6>u;++u)S(g[u]);return l}var p=new F(34067);be[p.id]=p,o.cubeCount++;var g=Array(6);return l(t,n,r,i,u,s),l.subimage=function(e,t,n,r,i){n|=0,r|=0,i|=0;var o=v();return f(o,p),o.width=0,o.height=0,h(o,t),o.width=o.width||(p.width>>i)-n,o.height=o.height||(p.height>>i)-r,P(p),d(o,34069+e,n,r,i),M(),E(o),l},l.resize=function(t){if((t|=0)!==p.width){l.width=p.width=t,l.height=p.height=t,P(p);for(var n=0;6>n;++n)for(var r=0;p.mipmask>>r;++r)e.texImage2D(34069+n,r,p.format,t>>r,t>>r,0,p.format,p.type,null);return M(),a.profile&&(p.stats.size=A(p.internalformat,p.type,l.width,l.height,!1,!0)),l}},l._reglType="textureCube",l._texture=p,a.profile&&(l.stats=p.stats),l.destroy=function(){p.decRef()},l},clear:function(){for(var t=0;t<ye;++t)e.activeTexture(33984+t),e.bindTexture(3553,null),we[t]=null;X(be).forEach(L),o.cubeCount=0,o.textureCount=0},getTexture:function(e){return null},restore:function(){for(var t=0;t<ye;++t){var n=we[t];n&&(n.bindCount=0,n.unit=-1,we[t]=null)}X(be).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var n=0;32>n;++n)if(0!=(t.mipmask&1<<n))if(3553===t.target)e.texImage2D(3553,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);else for(var r=0;6>r;++r)e.texImage2D(34069+r,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);D(t.texInfo,t.target)})},refresh:function(){for(var t=0;t<ye;++t){var n=we[t];n&&(n.bindCount=0,n.unit=-1,we[t]=null),e.activeTexture(33984+t),e.bindTexture(3553,null),e.bindTexture(34067,null)}}}}function C(e,t,n,r,i,o){function a(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=e=0;t?(e=t.width,r=t.height):n&&(e=n.width,r=n.height),this.width=e,this.height=r}function u(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function s(e,t,n){e&&(e.texture?e.texture._texture.refCount+=1:e.renderbuffer._renderbuffer.refCount+=1)}function f(t,n){n&&(n.texture?e.framebufferTexture2D(36160,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,n.renderbuffer._renderbuffer.renderbuffer))}function c(e){var t=3553,n=null,r=null,i=e;return"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),"texture2d"===(e=i._reglType)?n=i:"textureCube"===e?n=i:"renderbuffer"===e&&(r=i,t=36161),new a(t,n,r)}function l(e,t,n,o,u){return n?((e=r.create2D({width:e,height:t,format:o,type:u}))._texture.refCount=0,new a(3553,e,null)):((e=i.create({width:e,height:t,format:o}))._renderbuffer.refCount=0,new a(36161,null,e))}function p(e){return e&&(e.texture||e.renderbuffer)}function h(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}function d(){this.id=A++,E[this.id]=this,this.framebuffer=e.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function g(e){e.colorAttachments.forEach(u),u(e.depthAttachment),u(e.stencilAttachment),u(e.depthStencilAttachment)}function m(t){e.deleteFramebuffer(t.framebuffer),t.framebuffer=null,o.framebufferCount--,delete E[t.id]}function v(t){var r;e.bindFramebuffer(36160,t.framebuffer);var i=t.colorAttachments;for(r=0;r<i.length;++r)f(36064+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)e.framebufferTexture2D(36160,36064+r,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0),e.framebufferTexture2D(36160,36096,3553,null,0),e.framebufferTexture2D(36160,36128,3553,null,0),f(36096,t.depthAttachment),f(36128,t.stencilAttachment),f(33306,t.depthStencilAttachment),e.checkFramebufferStatus(36160),e.isContextLost(),e.bindFramebuffer(36160,y.next?y.next.framebuffer:null),y.cur=y.next,e.getError()}function b(e,t){function n(e,t){var i,o=0,a=0,u=!0,f=!0;i=null;var h=!0,d="rgba",m="uint8",b=1,y=null,_=null,A=null,E=!1;"number"==typeof e?(o=0|e,a=0|t||o):e?("shape"in e?(o=(a=e.shape)[0],a=a[1]):("radius"in e&&(o=a=e.radius),"width"in e&&(o=e.width),"height"in e&&(a=e.height)),("color"in e||"colors"in e)&&(i=e.color||e.colors,Array.isArray(i)),i||("colorCount"in e&&(b=0|e.colorCount),"colorTexture"in e&&(h=!!e.colorTexture,d="rgba4"),"colorType"in e&&(m=e.colorType,!h)&&("half float"===m||"float16"===m?d="rgba16f":"float"!==m&&"float32"!==m||(d="rgba32f")),"colorFormat"in e&&(d=e.colorFormat,0<=w.indexOf(d)?h=!0:0<=x.indexOf(d)&&(h=!1))),("depthTexture"in e||"depthStencilTexture"in e)&&(E=!(!e.depthTexture&&!e.depthStencilTexture)),"depth"in e&&("boolean"==typeof e.depth?u=e.depth:(y=e.depth,f=!1)),"stencil"in e&&("boolean"==typeof e.stencil?f=e.stencil:(_=e.stencil,u=!1)),"depthStencil"in e&&("boolean"==typeof e.depthStencil?u=f=e.depthStencil:(A=e.depthStencil,f=u=!1))):o=a=1;var C=null,k=null,O=null,T=null;if(Array.isArray(i))C=i.map(c);else if(i)C=[c(i)];else for(C=Array(b),i=0;i<b;++i)C[i]=l(o,a,h,d,m);for(o=o||C[0].width,a=a||C[0].height,y?k=c(y):u&&!f&&(k=l(o,a,E,"depth","uint32")),_?O=c(_):f&&!u&&(O=l(o,a,!1,"stencil","uint8")),A?T=c(A):!y&&!_&&f&&u&&(T=l(o,a,E,"depth stencil","depth stencil")),u=null,i=0;i<C.length;++i)s(C[i]),C[i]&&C[i].texture&&(f=ye[C[i].texture._texture.format]*we[C[i].texture._texture.type],null===u&&(u=f));return s(k),s(O),s(T),g(r),r.width=o,r.height=a,r.colorAttachments=C,r.depthAttachment=k,r.stencilAttachment=O,r.depthStencilAttachment=T,n.color=C.map(p),n.depth=p(k),n.stencil=p(O),n.depthStencil=p(T),n.width=r.width,n.height=r.height,v(r),n}var r=new d;return o.framebufferCount++,n(e,t),N(n,{resize:function(e,t){var i=Math.max(0|e,1),o=Math.max(0|t||i,1);if(i===r.width&&o===r.height)return n;for(var a=r.colorAttachments,u=0;u<a.length;++u)h(a[u],i,o);return h(r.depthAttachment,i,o),h(r.stencilAttachment,i,o),h(r.depthStencilAttachment,i,o),r.width=n.width=i,r.height=n.height=o,v(r),n},_reglType:"framebuffer",_framebuffer:r,destroy:function(){m(r),g(r)},use:function(e){y.setFBO({framebuffer:n},e)}})}var y={cur:null,next:null,dirty:!1,setFBO:null},w=["rgba"],x=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&x.push("srgba"),t.ext_color_buffer_half_float&&x.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&x.push("rgba32f");var _=["uint8"];t.oes_texture_half_float&&_.push("half float","float16"),t.oes_texture_float&&_.push("float","float32");var A=0,E={};return N(y,{getFramebuffer:function(e){return"function"==typeof e&&"framebuffer"===e._reglType&&(e=e._framebuffer)instanceof d?e:null},create:b,createCube:function(e){function t(e){var i,o={color:null},a=0,u=null;i="rgba";var s="uint8",f=1;if("number"==typeof e?a=0|e:e?("shape"in e?a=e.shape[0]:("radius"in e&&(a=0|e.radius),"width"in e?a=0|e.width:"height"in e&&(a=0|e.height)),("color"in e||"colors"in e)&&(u=e.color||e.colors,Array.isArray(u)),u||("colorCount"in e&&(f=0|e.colorCount),"colorType"in e&&(s=e.colorType),"colorFormat"in e&&(i=e.colorFormat)),"depth"in e&&(o.depth=e.depth),"stencil"in e&&(o.stencil=e.stencil),"depthStencil"in e&&(o.depthStencil=e.depthStencil)):a=1,u)if(Array.isArray(u))for(e=[],i=0;i<u.length;++i)e[i]=u[i];else e=[u];else for(e=Array(f),u={radius:a,format:i,type:s},i=0;i<f;++i)e[i]=r.createCube(u);for(o.color=Array(e.length),i=0;i<e.length;++i)f=e[i],a=a||f.width,o.color[i]={target:34069,data:e[i]};for(i=0;6>i;++i){for(f=0;f<e.length;++f)o.color[f].target=34069+i;0<i&&(o.depth=n[0].depth,o.stencil=n[0].stencil,o.depthStencil=n[0].depthStencil),n[i]?n[i](o):n[i]=b(o)}return N(t,{width:a,height:a,color:e})}var n=Array(6);return t(e),N(t,{faces:n,resize:function(e){var r=0|e;if(r===t.width)return t;var i=t.color;for(e=0;e<i.length;++e)i[e].resize(r);for(e=0;6>e;++e)n[e].resize(r);return t.width=t.height=r,t},_reglType:"framebufferCube",destroy:function(){n.forEach(function(e){e.destroy()})}})},clear:function(){X(E).forEach(m)},restore:function(){y.cur=null,y.next=null,y.dirty=!0,X(E).forEach(function(t){t.framebuffer=e.createFramebuffer(),v(t)})}})}function k(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function O(e,t,n,r,i){function o(){this.id=++f,this.attributes=[];var e=t.oes_vertex_array_object;this.vao=e?e.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}var a=n.maxAttributes,u=Array(a);for(n=0;n<a;++n)u[n]=new k;var f=0,c={},l={Record:k,scope:{},state:u,currentVAO:null,targetVAO:null,restore:t.oes_vertex_array_object?function(){t.oes_vertex_array_object&&X(c).forEach(function(e){e.refresh()})}:function(){},createVAO:function(e){function t(e){var r={},o=n.attributes;o.length=e.length;for(var a=0;a<e.length;++a){var u,f=e[a],c=o[a]=new k,l=f.data||f;if(Array.isArray(l)||$(l)||s(l))n.buffers[a]&&(u=n.buffers[a],$(l)&&u._buffer.byteLength>=l.byteLength?u.subdata(l):(u.destroy(),n.buffers[a]=null)),n.buffers[a]||(u=n.buffers[a]=i.create(f,34962,!1,!0)),c.buffer=i.getBuffer(u),c.size=0|c.buffer.dimension,c.normalized=!1,c.type=c.buffer.dtype,c.offset=0,c.stride=0,c.divisor=0,c.state=1,r[a]=1;else i.getBuffer(f)?(c.buffer=i.getBuffer(f),c.size=0|c.buffer.dimension,c.normalized=!1,c.type=c.buffer.dtype,c.offset=0,c.stride=0,c.divisor=0,c.state=1):i.getBuffer(f.buffer)?(c.buffer=i.getBuffer(f.buffer),c.size=0|(+f.size||c.buffer.dimension),c.normalized=!!f.normalized||!1,c.type="type"in f?Z[f.type]:c.buffer.dtype,c.offset=0|(f.offset||0),c.stride=0|(f.stride||0),c.divisor=0|(f.divisor||0),c.state=1):"x"in f&&(c.x=+f.x||0,c.y=+f.y||0,c.z=+f.z||0,c.w=+f.w||0,c.state=2)}for(e=0;e<n.buffers.length;++e)!r[e]&&n.buffers[e]&&(n.buffers[e].destroy(),n.buffers[e]=null);return n.refresh(),t}var n=new o;return r.vaoCount+=1,t.destroy=function(){for(var e=0;e<n.buffers.length;++e)n.buffers[e]&&n.buffers[e].destroy();n.buffers.length=0,n.destroy()},t._vao=n,t._reglType="vao",t(e)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(t){for(var n=0;n<u.length;++n){var r=u[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}},setVAO:t.oes_vertex_array_object?function(e){if(e!==l.currentVAO){var n=t.oes_vertex_array_object;e?n.bindVertexArrayOES(e.vao):n.bindVertexArrayOES(null),l.currentVAO=e}}:function(n){if(n!==l.currentVAO){if(n)n.bindAttrs();else for(var r=t.angle_instanced_arrays,i=0;i<u.length;++i){var o=u[i];o.buffer?(e.enableVertexAttribArray(i),e.vertexAttribPointer(i,o.size,o.type,o.normalized,o.stride,o.offfset),r&&o.divisor&&r.vertexAttribDivisorANGLE(i,o.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,o.x,o.y,o.z,o.w))}l.currentVAO=n}},clear:t.oes_vertex_array_object?function(){X(c).forEach(function(e){e.destroy()})}:function(){}};return o.prototype.bindAttrs=function(){for(var n=t.angle_instanced_arrays,r=this.attributes,i=0;i<r.length;++i){var o=r[i];o.buffer?(e.enableVertexAttribArray(i),e.bindBuffer(34962,o.buffer.buffer),e.vertexAttribPointer(i,o.size,o.type,o.normalized,o.stride,o.offset),n&&o.divisor&&n.vertexAttribDivisorANGLE(i,o.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,o.x,o.y,o.z,o.w))}for(n=r.length;n<a;++n)e.disableVertexAttribArray(n)},o.prototype.refresh=function(){var e=t.oes_vertex_array_object;e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),l.currentVAO=this)},o.prototype.destroy=function(){if(this.vao){var e=t.oes_vertex_array_object;this===l.currentVAO&&(l.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],--r.vaoCount)},l}function T(e,t,n,r){function i(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function o(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function a(n,r,i){if(!(a=(i=35632===n?f:c)[r])){var o=t.str(r),a=e.createShader(n);e.shaderSource(a,o),e.compileShader(a),i[r]=a}return a}function u(e,t){this.id=h++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function s(n,u,s){var f;f=a(35632,n.fragId);var c=a(35633,n.vertId);if(u=n.program=e.createProgram(),e.attachShader(u,f),e.attachShader(u,c),s)for(f=0;f<s.length;++f)c=s[f],e.bindAttribLocation(u,c[0],c[1]);e.linkProgram(u),c=e.getProgramParameter(u,35718),r.profile&&(n.stats.uniformsCount=c);var l=n.uniforms;for(f=0;f<c;++f)if(s=e.getActiveUniform(u,f))if(1<s.size)for(var p=0;p<s.size;++p){var h=s.name.replace("[0]","["+p+"]");o(l,new i(h,t.id(h),e.getUniformLocation(u,h),s))}else o(l,new i(s.name,t.id(s.name),e.getUniformLocation(u,s.name),s));for(c=e.getProgramParameter(u,35721),r.profile&&(n.stats.attributesCount=c),n=n.attributes,f=0;f<c;++f)(s=e.getActiveAttrib(u,f))&&o(n,new i(s.name,t.id(s.name),e.getAttribLocation(u,s.name),s))}var f={},c={},l={},p=[],h=0;return r.profile&&(n.getMaxUniformsCount=function(){var e=0;return p.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return p.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);X(f).forEach(t),f={},X(c).forEach(t),c={},p.forEach(function(t){e.deleteProgram(t.program)}),p.length=0,l={},n.shaderCount=0},program:function(t,r,i,o){var a=l[r];a||(a=l[r]={});var h=a[t];if(h&&(h.refCount++,!o))return h;var d=new u(r,t);return n.shaderCount++,s(d,i,o),h||(a[t]=d),p.push(d),N(d,{destroy:function(){if(d.refCount--,0>=d.refCount){e.deleteProgram(d.program);var t=p.indexOf(d);p.splice(t,1),n.shaderCount--}0>=a[d.vertId].refCount&&(e.deleteShader(c[d.vertId]),delete c[d.vertId],delete l[d.fragId][d.vertId]),Object.keys(l[d.fragId]).length||(e.deleteShader(f[d.fragId]),delete f[d.fragId],delete l[d.fragId])}})},restore:function(){f={},c={};for(var e=0;e<p.length;++e)s(p[e],null,p[e].attributes.map(function(e){return[e.location,e.name]}))},shader:a,frag:-1,vert:-1}}function j(e,t,n,r,i,o,a){function u(i){var o;o=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type;var a=0,u=0,s=r.framebufferWidth,f=r.framebufferHeight,c=null;return $(i)?c=i:i&&(a=0|i.x,u=0|i.y,s=0|(i.width||r.framebufferWidth-a),f=0|(i.height||r.framebufferHeight-u),c=i.data||null),n(),i=s*f*4,c||(5121===o?c=new Uint8Array(i):5126===o&&(c=c||new Float32Array(i))),e.pixelStorei(3333,4),e.readPixels(a,u,s,f,6408,o,c),c}return function(e){return e&&"framebuffer"in e?function(e){var n;return t.setFBO({framebuffer:e.framebuffer},function(){n=u(e)}),n}(e):u(e)}}function S(e){return Array.prototype.slice.call(e)}function B(e){return S(e).join("")}function z(e){return Array.isArray(e)||$(e)||s(e)}function D(e){return e.sort(function(e,t){return"viewport"===e?-1:"viewport"===t?1:e<t?-1:1})}function F(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function P(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function M(e){return new F(!1,!1,!1,e)}function L(e,t){var n=e.type;if(0===n)return new F(!0,1<=(n=e.data.length),2<=n,t);if(4===n)return new F((n=e.data).thisDep,n.contextDep,n.propDep,t);if(5===n)return new F(!1,!1,!1,t);if(6===n){for(var r=n=!1,i=!1,o=0;o<e.data.length;++o){var a=e.data[o];1===a.type?i=!0:2===a.type?r=!0:3===a.type?n=!0:0===a.type?(n=!0,1<=(a=a.data)&&(r=!0),2<=a&&(i=!0)):4===a.type&&(n=n||a.data.thisDep,r=r||a.data.contextDep,i=i||a.data.propDep)}return new F(n,r,i,t)}return new F(3===n,2===n,1===n,t)}function R(e,t,n,r,i,a,u,s,f,c,l,p,h,d,g){function v(e){return e.replace(".","_")}function b(e,t,n){var r=v(e);oe.push(e),ie[r]=re[r]=!!n,ae[r]=t}function y(e,t,n){var r=v(e);oe.push(e),Array.isArray(n)?(re[r]=n.slice(),ie[r]=n.slice()):re[r]=ie[r]=n,ue[r]=t}function w(){var e=function(){function e(){var e=[],t=[];return N(function(){e.push.apply(e,S(arguments))},{def:function(){var r="v"+n++;return t.push(r),0<arguments.length&&(e.push(r,"="),e.push.apply(e,S(arguments)),e.push(";")),r},toString:function(){return B([0<t.length?"var "+t.join(",")+";":"",B(e)])}})}function t(){function t(e,t){r(e,t,"=",n.def(e,t),";")}var n=e(),r=e(),i=n.toString,o=r.toString;return N(function(){n.apply(n,S(arguments))},{def:n.def,entry:n,exit:r,save:t,set:function(e,r,i){t(e,r),n(e,r,"=",i,";")},toString:function(){return i()+o()}})}var n=0,r=[],i=[],o=e(),a={};return{global:o,link:function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return r[t];return t="g"+n++,r.push(t),i.push(e),t},block:e,proc:function(e,n){function r(){var e="a"+i.length;return i.push(e),e}var i=[];n=n||0;for(var o=0;o<n;++o)r();var u=(o=t()).toString;return a[e]=N(o,{arg:r,toString:function(){return B(["function(",i.join(),"){",u(),"}"])}})},scope:t,cond:function(){var e=B(arguments),n=t(),r=t(),i=n.toString,o=r.toString;return N(n,{then:function(){return n.apply(n,S(arguments)),this},else:function(){return r.apply(r,S(arguments)),this},toString:function(){var t=o();return t&&(t="else{"+t+"}"),B(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=['"use strict";',o,"return {"];Object.keys(a).forEach(function(t){e.push('"',t,'":',a[t].toString(),",")}),e.push("}");var t=B(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(t)).apply(null,i)}}}(),n=e.link,r=e.global;e.id=ce++,e.batchId="0";var i=n(se),o=e.shared={props:"a0"};Object.keys(se).forEach(function(e){o[e]=r.def(i,".",e)});var a=e.next={},u=e.current={};Object.keys(ue).forEach(function(e){Array.isArray(re[e])&&(a[e]=r.def(o.next,".",e),u[e]=r.def(o.current,".",e))});var s=e.constants={};Object.keys(fe).forEach(function(e){s[e]=r.def(JSON.stringify(fe[e]))}),e.invoke=function(t,r){switch(r.type){case 0:var i=["this",o.context,o.props,e.batchId];return t.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case 1:return t.def(o.props,r.data);case 2:return t.def(o.context,r.data);case 3:return t.def("this",r.data);case 4:return r.data.append(e,t),r.data.ref;case 5:return r.data.toString();case 6:return r.data.map(function(n){return e.invoke(t,n)})}},e.attribCache={};var f={};return e.scopeAttrib=function(e){if((e=t.id(e))in f)return f[e];var r=c.scope[e];return r||(r=c.scope[e]=new K),f[e]=n(r)},e}function x(e,t){var n=e.static,r=e.dynamic;if("framebuffer"in n){var i=n.framebuffer;return i?(i=s.getFramebuffer(i),M(function(e,t){var n=e.link(i),r=e.shared;return t.set(r.framebuffer,".next",n),r=r.context,t.set(r,".framebufferWidth",n+".width"),t.set(r,".framebufferHeight",n+".height"),n})):M(function(e,t){var n=e.shared;return t.set(n.framebuffer,".next","null"),n=n.context,t.set(n,".framebufferWidth",n+".drawingBufferWidth"),t.set(n,".framebufferHeight",n+".drawingBufferHeight"),"null"})}if("framebuffer"in r){var o=r.framebuffer;return L(o,function(e,t){var n=e.invoke(t,o),r=e.shared,i=r.framebuffer;n=t.def(i,".getFramebuffer(",n,")");return t.set(i,".next",n),r=r.context,t.set(r,".framebufferWidth",n+"?"+n+".width:"+r+".drawingBufferWidth"),t.set(r,".framebufferHeight",n+"?"+n+".height:"+r+".drawingBufferHeight"),n})}return null}function _(e,n,r){function i(e){if(e in o){var n=t.id(o[e]);return(e=M(function(){return n})).id=n,e}if(e in a){var r=a[e];return L(r,function(e,t){var n=e.invoke(t,r);return t.def(e.shared.strings,".id(",n,")")})}return null}var o=e.static,a=e.dynamic,u=i("frag"),s=i("vert"),f=null;return P(u)&&P(s)?(f=l.program(s.id,u.id,null,r),e=M(function(e,t){return e.link(f)})):e=new F(u&&u.thisDep||s&&s.thisDep,u&&u.contextDep||s&&s.contextDep,u&&u.propDep||s&&s.propDep,function(e,t){var n,r,i=e.shared.shader;return n=u?u.append(e,t):t.def(i,".","frag"),r=s?s.append(e,t):t.def(i,".","vert"),t.def(i+".program("+r+","+n+")")}),{frag:u,vert:s,progVar:e,program:f}}function A(e,t){function n(e,t){if(e in r){var n=0|r[e];return M(function(e,r){return t&&(e.OFFSET=n),n})}if(e in i){var a=i[e];return L(a,function(e,n){var r=e.invoke(n,a);return t&&(e.OFFSET=r),r})}return t&&o?M(function(e,t){return e.OFFSET="0",0}):null}var r=e.static,i=e.dynamic,o=function(){if("elements"in r){var e=r.elements;z(e)?e=a.getElements(a.create(e,!0)):e&&(e=a.getElements(e));var t=M(function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r}return t.ELEMENTS=null});return t.value=e,t}if("elements"in i){var n=i.elements;return L(n,function(e,t){var r=(i=e.shared).isBufferArgs,i=i.elements,o=e.invoke(t,n),a=t.def("null");r=t.def(r,"(",o,")"),o=e.cond(r).then(a,"=",i,".createStream(",o,");").else(a,"=",i,".getElements(",o,");");return t.entry(o),t.exit(e.cond(r).then(i,".destroyStream(",a,");")),e.ELEMENTS=a})}return null}(),u=n("offset",!0);return{elements:o,primitive:function(){if("primitive"in r){var e=r.primitive;return M(function(t,n){return ne[e]})}if("primitive"in i){var t=i.primitive;return L(t,function(e,n){var r=e.constants.primTypes,i=e.invoke(n,t);return n.def(r,"[",i,"]")})}return o?P(o)?o.value?M(function(e,t){return t.def(e.ELEMENTS,".primType")}):M(function(){return 4}):new F(o.thisDep,o.contextDep,o.propDep,function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",4)}):null}(),count:function(){if("count"in r){var e=0|r.count;return M(function(){return e})}if("count"in i){var t=i.count;return L(t,function(e,n){return e.invoke(n,t)})}return o?P(o)?o?u?new F(u.thisDep,u.contextDep,u.propDep,function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)}):M(function(e,t){return t.def(e.ELEMENTS,".vertCount")}):M(function(){return-1}):new F(o.thisDep||u.thisDep,o.contextDep||u.contextDep,o.propDep||u.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}):null}(),instances:n("instances",!1),offset:u}}function E(e,n){var r=e.static,o=e.dynamic,a={};return Object.keys(r).forEach(function(e){var n=r[e],o=t.id(e),u=new K;if(z(n))u.state=1,u.buffer=i.getBuffer(i.create(n,34962,!1,!0)),u.type=0;else if(f=i.getBuffer(n))u.state=1,u.buffer=f,u.type=0;else if("constant"in n){var s=n.constant;u.buffer="null",u.state=2,"number"==typeof s?u.x=s:xe.forEach(function(e,t){t<s.length&&(u[e]=s[t])})}else{var f=z(n.buffer)?i.getBuffer(i.create(n.buffer,34962,!1,!0)):i.getBuffer(n.buffer),c=0|n.offset,l=0|n.stride,p=0|n.size,h=!!n.normalized,d=0;"type"in n&&(d=Z[n.type]),n=0|n.divisor,u.buffer=f,u.state=1,u.size=p,u.normalized=h,u.type=d||f.dtype,u.offset=c,u.stride=l,u.divisor=n}a[e]=M(function(e,t){var n=e.attribCache;if(o in n)return n[o];var r={isStream:!1};return Object.keys(u).forEach(function(e){r[e]=u[e]}),u.buffer&&(r.buffer=e.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[o]=r})}),Object.keys(o).forEach(function(e){var t=o[e];a[e]=L(t,function(e,n){function r(e){n(s[e],"=",i,".",e,"|0;")}var i=e.invoke(n,t),o=e.shared,a=e.constants,u=o.isBufferArgs,s=(o=o.buffer,{isStream:n.def(!1)}),f=new K;f.state=1,Object.keys(f).forEach(function(e){s[e]=n.def(""+f[e])});var c=s.buffer,l=s.type;return n("if(",u,"(",i,")){",s.isStream,"=true;",c,"=",o,".createStream(",34962,",",i,");",l,"=",c,".dtype;","}else{",c,"=",o,".getBuffer(",i,");","if(",c,"){",l,"=",c,".dtype;",'}else if("constant" in ',i,"){",s.state,"=",2,";","if(typeof "+i+'.constant === "number"){',s[xe[0]],"=",i,".constant;",xe.slice(1).map(function(e){return s[e]}).join("="),"=0;","}else{",xe.map(function(e,t){return s[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"}).join(""),"}}else{","if(",u,"(",i,".buffer)){",c,"=",o,".createStream(",34962,",",i,".buffer);","}else{",c,"=",o,".getBuffer(",i,".buffer);","}",l,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",c,".dtype;",s.normalized,"=!!",i,".normalized;"),r("size"),r("offset"),r("stride"),r("divisor"),n("}}"),n.exit("if(",s.isStream,"){",o,".destroyStream(",c,");","}"),s})}),a}function C(e,t,r,i,a){function u(e){var t=f[e];t&&(p[e]=t)}var s=function(e,t){if("string"==typeof(n=e.static).frag&&"string"==typeof n.vert){if(0<Object.keys(t.dynamic).length)return null;var n=t.static,r=Object.keys(n);if(0<r.length&&"number"==typeof n[r[0]]){for(var i=[],o=0;o<r.length;++o)i.push([0|n[r[o]],r[o]]);return i}}return null}(e,t),f=function(e,t,n){function r(e){if(e in i){var n=i[e];e=!0;var r,a,u=0|n.x,s=0|n.y;return"width"in n?r=0|n.width:e=!1,"height"in n?a=0|n.height:e=!1,new F(!e&&t&&t.thisDep,!e&&t&&t.contextDep,!e&&t&&t.propDep,function(e,t){var i=e.shared.context,o=r;"width"in n||(o=t.def(i,".","framebufferWidth","-",u));var f=a;return"height"in n||(f=t.def(i,".","framebufferHeight","-",s)),[u,s,o,f]})}if(e in o){var f=o[e];return e=L(f,function(e,t){var n=e.invoke(t,f),r=e.shared.context,i=t.def(n,".x|0"),o=t.def(n,".y|0");return[i,o,t.def('"width" in ',n,"?",n,".width|0:","(",r,".","framebufferWidth","-",i,")"),n=t.def('"height" in ',n,"?",n,".height|0:","(",r,".","framebufferHeight","-",o,")")]}),t&&(e.thisDep=e.thisDep||t.thisDep,e.contextDep=e.contextDep||t.contextDep,e.propDep=e.propDep||t.propDep),e}return t?new F(t.thisDep,t.contextDep,t.propDep,function(e,t){var n=e.shared.context;return[0,0,t.def(n,".","framebufferWidth"),t.def(n,".","framebufferHeight")]}):null}var i=e.static,o=e.dynamic;if(e=r("viewport")){var a=e;e=new F(e.thisDep,e.contextDep,e.propDep,function(e,t){var n=a.append(e,t),r=e.shared.context;return t.set(r,".viewportWidth",n[2]),t.set(r,".viewportHeight",n[3]),n})}return{viewport:e,scissor_box:r("scissor.box")}}(e,d=x(e)),l=A(e),p=function(e,t){var n=e.static,r=e.dynamic,i={};return oe.forEach(function(e){function t(t,o){if(e in n){var u=t(n[e]);i[a]=M(function(){return u})}else if(e in r){var s=r[e];i[a]=L(s,function(e,t){return o(e,t,e.invoke(t,s))})}}var a=v(e);switch(e){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return t(function(e){return e},function(e,t,n){return n});case"depth.func":return t(function(e){return Ee[e]},function(e,t,n){return t.def(e.constants.compareFuncs,"[",n,"]")});case"depth.range":return t(function(e){return e},function(e,t,n){return[t.def("+",n,"[0]"),t=t.def("+",n,"[1]")]});case"blend.func":return t(function(e){return[Ae["srcRGB"in e?e.srcRGB:e.src],Ae["dstRGB"in e?e.dstRGB:e.dst],Ae["srcAlpha"in e?e.srcAlpha:e.src],Ae["dstAlpha"in e?e.dstAlpha:e.dst]]},function(e,t,n){function r(e,r){return t.def('"',e,r,'" in ',n,"?",n,".",e,r,":",n,".",e)}e=e.constants.blendFuncs;var i=r("src","RGB"),o=r("dst","RGB"),a=(i=t.def(e,"[",i,"]"),t.def(e,"[",r("src","Alpha"),"]"));return[i,o=t.def(e,"[",o,"]"),a,e=t.def(e,"[",r("dst","Alpha"),"]")]});case"blend.equation":return t(function(e){return"string"==typeof e?[J[e],J[e]]:"object"==typeof e?[J[e.rgb],J[e.alpha]]:void 0},function(e,t,n){var r=e.constants.blendEquations,i=t.def(),o=t.def();return(e=e.cond("typeof ",n,'==="string"')).then(i,"=",o,"=",r,"[",n,"];"),e.else(i,"=",r,"[",n,".rgb];",o,"=",r,"[",n,".alpha];"),t(e),[i,o]});case"blend.color":return t(function(e){return o(4,function(t){return+e[t]})},function(e,t,n){return o(4,function(e){return t.def("+",n,"[",e,"]")})});case"stencil.mask":return t(function(e){return 0|e},function(e,t,n){return t.def(n,"|0")});case"stencil.func":return t(function(e){return[Ee[e.cmp||"keep"],e.ref||0,"mask"in e?e.mask:-1]},function(e,t,n){return[e=t.def('"cmp" in ',n,"?",e.constants.compareFuncs,"[",n,".cmp]",":",7680),t.def(n,".ref|0"),t=t.def('"mask" in ',n,"?",n,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return t(function(t){return["stencil.opBack"===e?1029:1028,Ce[t.fail||"keep"],Ce[t.zfail||"keep"],Ce[t.zpass||"keep"]]},function(t,n,r){function i(e){return n.def('"',e,'" in ',r,"?",o,"[",r,".",e,"]:",7680)}var o=t.constants.stencilOps;return["stencil.opBack"===e?1029:1028,i("fail"),i("zfail"),i("zpass")]});case"polygonOffset.offset":return t(function(e){return[0|e.factor,0|e.units]},function(e,t,n){return[t.def(n,".factor|0"),t=t.def(n,".units|0")]});case"cull.face":return t(function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),t},function(e,t,n){return t.def(n,'==="front"?',1028,":",1029)});case"lineWidth":return t(function(e){return e},function(e,t,n){return n});case"frontFace":return t(function(e){return ke[e]},function(e,t,n){return t.def(n+'==="cw"?2304:2305')});case"colorMask":return t(function(e){return e.map(function(e){return!!e})},function(e,t,n){return o(4,function(e){return"!!"+n+"["+e+"]"})});case"sample.coverage":return t(function(e){return["value"in e?e.value:1,!!e.invert]},function(e,t,n){return[t.def('"value" in ',n,"?+",n,".value:1"),t=t.def("!!",n,".invert")]})}}),i}(e),h=_(e,0,s);u("viewport"),u(v("scissor.box"));var d,g=0<Object.keys(p).length;if((d={framebuffer:d,draw:l,shader:h,state:p,dirty:g,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(e){var t,n=e.static;if(e=e.dynamic,"profile"in n){var r=!!n.profile;(t=M(function(e,t){return r})).enable=r}else if("profile"in e){var i=e.profile;t=L(i,function(e,t){return e.invoke(t,i)})}return t}(e),d.uniforms=function(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach(function(e){var t,r=n[e];if("number"==typeof r||"boolean"==typeof r)t=M(function(){return r});else if("function"==typeof r){var a=r._reglType;"texture2d"===a||"textureCube"===a?t=M(function(e){return e.link(r)}):"framebuffer"!==a&&"framebufferCube"!==a||(t=M(function(e){return e.link(r.color[0])}))}else m(r)&&(t=M(function(e){return e.global.def("[",o(r.length,function(e){return r[e]}),"]")}));t.value=r,i[e]=t}),Object.keys(r).forEach(function(e){var t=r[e];i[e]=L(t,function(e,n){return e.invoke(n,t)})}),i}(r),d.drawVAO=d.scopeVAO=function(e,t){var n=e.static,r=e.dynamic;if("vao"in n){var i=n.vao;return null!==i&&null===c.getVAO(i)&&(i=c.createVAO(i)),M(function(e){return e.link(c.getVAO(i))})}if("vao"in r){var o=r.vao;return L(o,function(e,t){var n=e.invoke(t,o);return t.def(e.shared.vao+".getVAO("+n+")")})}return null}(e),!d.drawVAO&&h.program&&!s&&n.angle_instanced_arrays){var b=!0;if(e=h.program.attributes.map(function(e){return e=t.static[e],b=b&&!!e,e}),b&&0<e.length){var y=c.getVAO(c.createVAO(e));d.drawVAO=new F(null,null,null,function(e,t){return e.link(y)}),d.useVAO=!0}}return s?d.useVAO=!0:d.attributes=E(t),d.context=function(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach(function(e){var n=t[e];r[e]=M(function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)})}),Object.keys(n).forEach(function(e){var t=n[e];r[e]=L(t,function(e,n){return e.invoke(n,t)})}),r}(i),d}function k(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach(function(o){t.save(r,"."+o);var a=n[o].append(e,t);Array.isArray(a)?i(r,".",o,"=[",a.join(),"];"):i(r,".",o,"=",a,";")}),t(i)}function O(e,t,n,r){var i,o=(u=e.shared).gl,a=u.framebuffer;te&&(i=t.def(u.extensions,".webgl_draw_buffers"));var u=(s=e.constants).drawBuffer,s=s.backBuffer;e=n?n.append(e,t):t.def(a,".next"),r||t("if(",e,"!==",a,".cur){"),t("if(",e,"){",o,".bindFramebuffer(",36160,",",e,".framebuffer);"),te&&t(i,".drawBuffersWEBGL(",u,"[",e,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",36160,",null);"),te&&t(i,".drawBuffersWEBGL(",s,");"),t("}",a,".cur=",e,";"),r||t("}")}function T(e,t,n){var r=e.shared,i=r.gl,a=e.current,u=e.next,s=r.current,f=r.next,c=e.cond(s,".dirty");oe.forEach(function(t){var r,l;if(!((t=v(t))in n.state))if(t in u){r=u[t],l=a[t];var p=o(re[t].length,function(e){return c.def(r,"[",e,"]")});c(e.cond(p.map(function(e,t){return e+"!=="+l+"["+t+"]"}).join("||")).then(i,".",ue[t],"(",p,");",p.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";"))}else r=c.def(f,".",t),p=e.cond(r,"!==",s,".",t),c(p),t in ae?p(e.cond(r).then(i,".enable(",ae[t],");").else(i,".disable(",ae[t],");"),s,".",t,"=",r,";"):p(i,".",ue[t],"(",r,");",s,".",t,"=",r,";")}),0===Object.keys(n.state).length&&c(s,".dirty=false;"),t(c)}function j(e,t,n,r){var i=e.shared,o=e.current,a=i.current,u=i.gl;D(Object.keys(n)).forEach(function(i){var s=n[i];if(!r||r(s)){var f=s.append(e,t);if(ae[i]){var c=ae[i];P(s)?t(u,f?".enable(":".disable(",c,");"):t(e.cond(f).then(u,".enable(",c,");").else(u,".disable(",c,");")),t(a,".",i,"=",f,";")}else if(m(f)){var l=o[i];t(u,".",ue[i],"(",f,");",f.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";")}else t(u,".",ue[i],"(",f,");",a,".",i,"=",f,";")}})}function R(e,t){ee&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function I(e,t,n,r,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(e){e(f=t.def(),"=",o(),";"),"string"==typeof i?e(p,".count+=",i,";"):e(p,".count++;"),d&&(r?e(c=t.def(),"=",g,".getNumPendingQueries();"):e(g,".beginQuery(",p,");"))}function u(e){e(p,".cpuTime+=",o(),"-",f,";"),d&&(r?e(g,".pushScopeStats(",c,",",g,".getNumPendingQueries(),",p,");"):e(g,".endQuery();"))}function s(e){var n=t.def(h,".profile");t(h,".profile=",e,";"),t.exit(h,".profile=",n,";")}var f,c,l=e.shared,p=e.stats,h=l.current,g=l.timer;if(n=n.profile){if(P(n))return void(n.enable?(a(t),u(t.exit),s("true")):s("false"));s(n=n.append(e,t))}else n=t.def(h,".profile");a(l=e.block()),t("if(",n,"){",l,"}"),u(e=e.block()),t.exit("if(",n,"){",e,"}")}function U(e,t,n,r,i){function o(n,r,i){function o(){t("if(!",c,".buffer){",s,".enableVertexAttribArray(",f,");}");var n,o=i.type;n=i.size?t.def(i.size,"||",r):r,t("if(",c,".type!==",o,"||",c,".size!==",n,"||",h.map(function(e){return c+"."+e+"!=="+i[e]}).join("||"),"){",s,".bindBuffer(",34962,",",l,".buffer);",s,".vertexAttribPointer(",[f,n,o,i.normalized,i.stride,i.offset],");",c,".type=",o,";",c,".size=",n,";",h.map(function(e){return c+"."+e+"="+i[e]+";"}).join(""),"}"),ee&&(o=i.divisor,t("if(",c,".divisor!==",o,"){",e.instancing,".vertexAttribDivisorANGLE(",[f,o],");",c,".divisor=",o,";}"))}function u(){t("if(",c,".buffer){",s,".disableVertexAttribArray(",f,");",c,".buffer=null;","}if(",xe.map(function(e,t){return c+"."+e+"!=="+p[t]}).join("||"),"){",s,".vertexAttrib4f(",f,",",p,");",xe.map(function(e,t){return c+"."+e+"="+p[t]+";"}).join(""),"}")}var s=a.gl,f=t.def(n,".location"),c=t.def(a.attributes,"[",f,"]");n=i.state;var l=i.buffer,p=[i.x,i.y,i.z,i.w],h=["buffer","normalized","offset","stride"];1===n?o():2===n?u():(t("if(",n,"===",1,"){"),o(),t("}else{"),u(),t("}"))}var a=e.shared;r.forEach(function(r){var a,u=r.name,s=n.attributes[u];if(s){if(!i(s))return;a=s.append(e,t)}else{if(!i(Oe))return;var f=e.scopeAttrib(u);a={},Object.keys(new K).forEach(function(e){a[e]=t.def(f,".",e)})}o(e.link(r),function(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)})}function V(e,n,r,i,a){for(var u,s=e.shared,f=s.gl,c=0;c<i.length;++c){var l,p=(g=i[c]).name,h=g.info.type,d=r.uniforms[p],g=e.link(g)+".location";if(d){if(!a(d))continue;if(P(d)){if(p=d.value,35678===h||35680===h)n(f,".uniform1i(",g,",",(h=e.link(p._texture||p.color[0]._texture))+".bind());"),n.exit(h,".unbind();");else if(35674===h||35675===h||35676===h)d=2,35675===h?d=3:35676===h&&(d=4),n(f,".uniformMatrix",d,"fv(",g,",false,",p=e.global.def("new Float32Array(["+Array.prototype.slice.call(p)+"])"),");");else{switch(h){case 5126:u="1f";break;case 35664:u="2f";break;case 35665:u="3f";break;case 35666:u="4f";break;case 35670:case 5124:u="1i";break;case 35671:case 35667:u="2i";break;case 35672:case 35668:u="3i";break;case 35673:u="4i";break;case 35669:u="4i"}n(f,".uniform",u,"(",g,",",m(p)?Array.prototype.slice.call(p):p,");")}continue}l=d.append(e,n)}else{if(!a(Oe))continue;l=n.def(s.uniforms,"[",t.id(p),"]")}switch(35678===h?n("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}"):35680===h&&n("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}"),p=1,h){case 35678:case 35680:h=n.def(l,"._texture"),n(f,".uniform1i(",g,",",h,".bind());"),n.exit(h,".unbind();");continue;case 5124:case 35670:u="1i";break;case 35667:case 35671:u="2i",p=2;break;case 35668:case 35672:u="3i",p=3;break;case 35669:case 35673:u="4i",p=4;break;case 5126:u="1f";break;case 35664:u="2f",p=2;break;case 35665:u="3f",p=3;break;case 35666:u="4f",p=4;break;case 35674:u="Matrix2fv";break;case 35675:u="Matrix3fv";break;case 35676:u="Matrix4fv"}if(n(f,".uniform",u,"(",g,","),"M"===u.charAt(0)){g=Math.pow(h-35674+2,2);var v=e.global.def("new Float32Array(",g,")");Array.isArray(l)?n("false,(",o(g,function(e){return v+"["+e+"]="+l[e]}),",",v,")"):n("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",o(g,function(e){return v+"["+e+"]="+l+"["+e+"]"}),",",v,")")}else n(1<p?o(p,function(e){return Array.isArray(l)?l[e]:l+"["+e+"]"}):l);n(");")}}function q(e,t,n,r){function i(i){var o=p[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(e,n):o.append(e,t):t.def(l,".",i)}function o(){function e(){n(s,".drawElementsInstancedANGLE(",[d,m,v,g+"<<(("+v+"-5121)>>1)",u],");")}function t(){n(s,".drawArraysInstancedANGLE(",[d,g,m,u],");")}h?b?e():(n("if(",h,"){"),e(),n("}else{"),t(),n("}")):t()}function a(){function e(){n(c+".drawElements("+[d,m,v,g+"<<(("+v+"-5121)>>1)"]+");")}function t(){n(c+".drawArrays("+[d,g,m]+");")}h?b?e():(n("if(",h,"){"),e(),n("}else{"),t(),n("}")):t()}var u,s,f=e.shared,c=f.gl,l=f.draw,p=r.draw,h=function(){var i=p.elements,o=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(o=n),i=i.append(e,o)):i=o.def(l,".","elements"),i&&o("if("+i+")"+c+".bindBuffer(34963,"+i+".buffer.buffer);"),i}(),d=i("primitive"),g=i("offset"),m=function(){var i=p.count,o=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(o=n),i=i.append(e,o)):i=o.def(l,".","count"),i}();if("number"==typeof m){if(0===m)return}else n("if(",m,"){"),n.exit("}");ee&&(u=i("instances"),s=e.instancing);var v=h+".type",b=p.elements&&P(p.elements);ee&&("number"!=typeof u||0<=u)?"string"==typeof u?(n("if(",u,">0){"),o(),n("}else if(",u,"<0){"),a(),n("}")):o():a()}function W(e,t,n,r,i){return i=(t=w()).proc("body",i),ee&&(t.instancing=i.def(t.shared.extensions,".angle_instanced_arrays")),e(t,i,n,r),t.compile().body}function Y(e,t,n,r){R(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),U(e,t,n,r.attributes,function(){return!0})),V(e,t,n,r.uniforms,function(){return!0}),q(e,t,t,n)}function $(e,t,n,r){function i(){return!0}e.batchId="a1",R(e,t),U(e,t,n,r.attributes,i),V(e,t,n,r.uniforms,i),q(e,t,t,n)}function X(e,t,n,r){function i(e){return e.contextDep&&a||e.propDep}function o(e){return!i(e)}R(e,t);var a=n.contextDep,u=t.def(),s=t.def();e.shared.props=s,e.batchId=u;var f=e.scope(),c=e.scope();t(f.entry,"for(",u,"=0;",u,"<","a1",";++",u,"){",s,"=","a0","[",u,"];",c,"}",f.exit),n.needsContext&&k(e,c,n.context),n.needsFramebuffer&&O(e,c,n.framebuffer),j(e,c,n.state,i),n.profile&&i(n.profile)&&I(e,c,n,!1,!0),r?(n.useVAO?n.drawVAO?i(n.drawVAO)?c(e.shared.vao,".setVAO(",n.drawVAO.append(e,c),");"):f(e.shared.vao,".setVAO(",n.drawVAO.append(e,f),");"):f(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(f(e.shared.vao,".setVAO(null);"),U(e,f,n,r.attributes,o),U(e,c,n,r.attributes,i)),V(e,f,n,r.uniforms,o),V(e,c,n,r.uniforms,i),q(e,f,c,n)):(t=e.global.def("{}"),r=n.shader.progVar.append(e,c),s=c.def(r,".id"),f=c.def(t,"[",s,"]"),c(e.shared.gl,".useProgram(",r,".program);","if(!",f,"){",f,"=",t,"[",s,"]=",e.link(function(t){return W($,e,n,t,2)}),"(",r,");}",f,".call(this,a0[",u,"],",u,");"))}function G(e,n){function r(t){var r=n.shader[t];r&&i.set(o.shader,"."+t,r.append(e,i))}var i=e.proc("scope",3);e.batchId="a2";var o=e.shared,a=o.current;k(e,i,n.context),n.framebuffer&&n.framebuffer.append(e,i),D(Object.keys(n.state)).forEach(function(t){var r=n.state[t].append(e,i);m(r)?r.forEach(function(n,r){i.set(e.next[t],"["+r+"]",n)}):i.set(o.next,"."+t,r)}),I(e,i,n,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(t){var r=n.draw[t];r&&i.set(o.draw,"."+t,""+r.append(e,i))}),Object.keys(n.uniforms).forEach(function(r){var a=n.uniforms[r].append(e,i);Array.isArray(a)&&(a="["+a.join()+"]"),i.set(o.uniforms,"["+t.id(r)+"]",a)}),Object.keys(n.attributes).forEach(function(t){var r=n.attributes[t].append(e,i),o=e.scopeAttrib(t);Object.keys(new K).forEach(function(e){i.set(o,"."+e,r[e])})}),n.scopeVAO&&i.set(o.vao,".targetVAO",n.scopeVAO.append(e,i)),r("vert"),r("frag"),0<Object.keys(n.state).length&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",e.shared.context,",a0,",e.batchId,");")}function Q(e,t,n){var r=t.static[n];if(r&&function(e){if("object"==typeof e&&!m(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(H.isDynamic(e[t[n]]))return!0;return!1}}(r)){var i=e.global,o=Object.keys(r),a=!1,u=!1,s=!1,f=e.global.def("{}");o.forEach(function(t){var n=r[t];if(H.isDynamic(n))"function"==typeof n&&(n=r[t]=H.unbox(n)),t=L(n,null),a=a||t.thisDep,s=s||t.propDep,u=u||t.contextDep;else{switch(i(f,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}}),t.dynamic[n]=new H.DynamicVariable(4,{thisDep:a,contextDep:u,propDep:s,ref:f,append:function(e,t){o.forEach(function(n){var i=r[n];H.isDynamic(i)&&(i=e.invoke(t,i),t(f,".",n,"=",i,";"))})}}),delete t.static[n]}}var K=c.Record,J={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(J.min=32775,J.max=32776);var ee=n.angle_instanced_arrays,te=n.webgl_draw_buffers,re={dirty:!0,profile:g.profile},ie={},oe=[],ae={},ue={};b("dither",3024),b("blend.enable",3042),y("blend.color","blendColor",[0,0,0,0]),y("blend.equation","blendEquationSeparate",[32774,32774]),y("blend.func","blendFuncSeparate",[1,0,1,0]),b("depth.enable",2929,!0),y("depth.func","depthFunc",513),y("depth.range","depthRange",[0,1]),y("depth.mask","depthMask",!0),y("colorMask","colorMask",[!0,!0,!0,!0]),b("cull.enable",2884),y("cull.face","cullFace",1029),y("frontFace","frontFace",2305),y("lineWidth","lineWidth",1),b("polygonOffset.enable",32823),y("polygonOffset.offset","polygonOffset",[0,0]),b("sample.alpha",32926),b("sample.enable",32928),y("sample.coverage","sampleCoverage",[1,!1]),b("stencil.enable",2960),y("stencil.mask","stencilMask",-1),y("stencil.func","stencilFunc",[519,0,-1]),y("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),y("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),b("scissor.enable",3089),y("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),y("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var se={gl:e,context:h,strings:t,next:ie,current:re,draw:p,elements:a,buffer:i,shader:l,attributes:c.state,vao:c,uniforms:f,framebuffer:s,extensions:n,timer:d,isBufferArgs:z},fe={primTypes:ne,compareFuncs:Ee,blendFuncs:Ae,blendEquations:J,stencilOps:Ce,glTypes:Z,orientationType:ke};te&&(fe.backBuffer=[1029],fe.drawBuffer=o(r.maxDrawbuffers,function(e){return 0===e?[0]:o(e,function(e){return 36064+e})}));var ce=0;return{next:ie,current:re,procs:function(){var e=w(),t=e.proc("poll"),i=e.proc("refresh"),a=e.block();t(a),i(a);var u,s=e.shared,f=s.gl,c=s.next,l=s.current;a(l,".dirty=false;"),O(e,t),O(e,i,null,!0),ee&&(u=e.link(ee)),n.oes_vertex_array_object&&i(e.link(n.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var p=0;p<r.maxAttributes;++p){var h=i.def(s.attributes,"[",p,"]"),d=e.cond(h,".buffer");d.then(f,".enableVertexAttribArray(",p,");",f,".bindBuffer(",34962,",",h,".buffer.buffer);",f,".vertexAttribPointer(",p,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(f,".disableVertexAttribArray(",p,");",f,".vertexAttrib4f(",p,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),i(d),ee&&i(u,".vertexAttribDivisorANGLE(",p,",",h,".divisor);")}return i(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(ae).forEach(function(n){var r=ae[n],o=a.def(c,".",n),u=e.block();u("if(",o,"){",f,".enable(",r,")}else{",f,".disable(",r,")}",l,".",n,"=",o,";"),i(u),t("if(",o,"!==",l,".",n,"){",u,"}")}),Object.keys(ue).forEach(function(n){var r,u,s=ue[n],p=re[n],h=e.block();h(f,".",s,"("),m(p)?(s=p.length,r=e.global.def(c,".",n),u=e.global.def(l,".",n),h(o(s,function(e){return r+"["+e+"]"}),");",o(s,function(e){return u+"["+e+"]="+r+"["+e+"];"}).join("")),t("if(",o(s,function(e){return r+"["+e+"]!=="+u+"["+e+"]"}).join("||"),"){",h,"}")):(r=a.def(c,".",n),u=a.def(l,".",n),h(r,");",l,".",n,"=",r,";"),t("if(",r,"!==",u,"){",h,"}")),i(h)}),e.compile()}(),compile:function(e,t,n,r,i){var o=w();o.stats=o.link(i),Object.keys(t.static).forEach(function(e){Q(o,t,e)}),_e.forEach(function(t){Q(o,e,t)});var a=C(e,t,n,r);return function(e,t){var n=e.proc("draw",1);R(e,n),k(e,n,t.context),O(e,n,t.framebuffer),T(e,n,t),j(e,n,t.state),I(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)Y(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(e.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",e.link(function(n){return W(Y,e,t,n,1)}),"(",r,");",a,".call(this,a0);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;")}(o,a),G(o,a),function(e,t){function n(e){return e.contextDep&&i||e.propDep}var r=e.proc("batch",2);e.batchId="0",R(e,r);var i=!1,o=!0;Object.keys(t.context).forEach(function(e){i=i||t.context[e].propDep}),i||(k(e,r,t.context),o=!1);var a=!1;if((u=t.framebuffer)?(u.propDep?i=a=!0:u.contextDep&&i&&(a=!0),a||O(e,r,u)):O(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(i=!0),T(e,r,t),j(e,r,t.state,function(e){return!n(e)}),t.profile&&n(t.profile)||I(e,r,t,!1,"a1"),t.contextDep=i,t.needsContext=o,t.needsFramebuffer=a,(o=t.shader.progVar).contextDep&&i||o.propDep)X(e,r,t,null);else if(o=o.append(e,r),r(e.shared.gl,".useProgram(",o,".program);"),t.shader.program)X(e,r,t,t.shader.program);else{r(e.shared.vao,".setVAO(null);");var u=e.global.def("{}"),s=(a=r.def(o,".id"),r.def(u,"[",a,"]"));r(e.cond(s).then(s,".call(this,a0,a1);").else(s,"=",u,"[",a,"]=",e.link(function(n){return W(X,e,t,n,2)}),"(",o,");",s,".call(this,a0,a1);"))}0<Object.keys(t.state).length&&r(e.shared.current,".dirty=true;")}(o,a),N(o.compile(),{destroy:function(){a.shader.program.destroy()}})}}}function I(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var N=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},U=0,H={DynamicVariable:e,define:function(n,r){return new e(n,t(r+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof e},unbox:function t(n,r){return"function"==typeof n?new e(0,n):"number"==typeof n||"boolean"==typeof n?new e(5,n):Array.isArray(n)?new e(6,n.map(function(e,n){return t(e,r+"["+n+"]")})):n instanceof e?n:void 0},accessor:t},V={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},q="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},W=u();W.zero=u();var Y=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(34852),i=e.getParameter(36063));var o=!!t.oes_texture_float;if(o){o=e.createTexture(),e.bindTexture(3553,o),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var a=e.createFramebuffer();if(e.bindFramebuffer(36160,a),e.framebufferTexture2D(36160,36064,3553,o,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))o=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var u=W.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,u),e.getError()?o=!1:(e.deleteFramebuffer(a),e.deleteTexture(o),o=1===u[0]),W.freeType(u)}}return u=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(u=e.createTexture(),a=W.allocType(5121,36),e.activeTexture(33984),e.bindTexture(34067,u),e.texImage2D(34069,0,6408,3,3,0,6408,5121,a),W.freeType(a),e.bindTexture(34067,null),e.deleteTexture(u),u=!e.getError()),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:o,npotTextureCube:u}},$=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},X=function(e){return Object.keys(e).map(function(t){return e[t]})},G={shape:function(e){for(var t=[];e.length;e=e[0])t.push(e.length);return t},flatten:function(e,t,n,r){var i=1;if(t.length)for(var o=0;o<t.length;++o)i*=t[o];else i=0;switch(n=r||W.allocType(n,i),t.length){case 0:break;case 1:for(r=t[0],t=0;t<r;++t)n[t]=e[t];break;case 2:for(r=t[0],t=t[1],o=i=0;o<r;++o)for(var a=e[o],u=0;u<t;++u)n[i++]=a[u];break;case 3:f(e,t[0],t[1],t[2],n,0);break;default:!function e(t,n,r,i,o){for(var a=1,u=r+1;u<n.length;++u)a*=n[u];var s=n[r];if(4==n.length-r){var c=n[r+1],l=n[r+2];for(n=n[r+3],u=0;u<s;++u)f(t[u],c,l,n,i,o),o+=a}else for(u=0;u<s;++u)e(t[u],n,r+1,i,o),o+=a}(e,t,0,n,0)}return n}},Q={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Z={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},K={dynamic:35048,stream:35040,static:35044},J=G.flatten,ee=G.shape,te=[];te[5120]=1,te[5122]=2,te[5124]=4,te[5121]=1,te[5123]=2,te[5125]=4,te[5126]=4;var ne={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},re=new Float32Array(1),ie=new Uint32Array(re.buffer),oe=[9984,9986,9985,9987],ae=[0,6409,6410,6407,6408],ue={};ue[6409]=ue[6406]=ue[6402]=1,ue[34041]=ue[6410]=2,ue[6407]=ue[35904]=3,ue[6408]=ue[35906]=4;var se=v("HTMLCanvasElement"),fe=v("OffscreenCanvas"),ce=v("CanvasRenderingContext2D"),le=v("ImageBitmap"),pe=v("HTMLImageElement"),he=v("HTMLVideoElement"),de=Object.keys(Q).concat([se,fe,ce,le,pe,he]),ge=[];ge[5121]=1,ge[5126]=4,ge[36193]=2,ge[5123]=2,ge[5125]=4;var me=[];me[32854]=2,me[32855]=2,me[36194]=2,me[34041]=4,me[33776]=.5,me[33777]=.5,me[33778]=1,me[33779]=1,me[35986]=.5,me[35987]=1,me[34798]=1,me[35840]=.5,me[35841]=.25,me[35842]=.5,me[35843]=.25,me[36196]=.5;var ve=[];ve[32854]=2,ve[32855]=2,ve[36194]=2,ve[33189]=2,ve[36168]=1,ve[34041]=4,ve[35907]=4,ve[34836]=16,ve[34842]=8,ve[34843]=6;var be=function(e,t,n,r,i){function o(e){this.id=f++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.height=this.width=0,i.profile&&(this.stats={size:0})}function a(t){var n=t.renderbuffer;e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete c[t.id],r.renderbufferCount--}var u={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(u.srgba=35907),t.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843),t.webgl_color_buffer_float&&(u.rgba32f=34836);var s=[];Object.keys(u).forEach(function(e){s[u[e]]=e});var f=0,c={};return o.prototype.decRef=function(){0>=--this.refCount&&a(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(c).forEach(function(t){e+=c[t].stats.size}),e}),{create:function(t,n){function a(t,n){var r=0,o=0,c=32854;if("object"==typeof t&&t?("shape"in t?(r=0|(o=t.shape)[0],o=0|o[1]):("radius"in t&&(r=o=0|t.radius),"width"in t&&(r=0|t.width),"height"in t&&(o=0|t.height)),"format"in t&&(c=u[t.format])):"number"==typeof t?(r=0|t,o="number"==typeof n?0|n:r):t||(r=o=1),r!==f.width||o!==f.height||c!==f.format)return a.width=f.width=r,a.height=f.height=o,f.format=c,e.bindRenderbuffer(36161,f.renderbuffer),e.renderbufferStorage(36161,c,r,o),i.profile&&(f.stats.size=ve[f.format]*f.width*f.height),a.format=s[f.format],a}var f=new o(e.createRenderbuffer());return c[f.id]=f,r.renderbufferCount++,a(t,n),a.resize=function(t,n){var r=0|t,o=0|n||r;return r===f.width&&o===f.height?a:(a.width=f.width=r,a.height=f.height=o,e.bindRenderbuffer(36161,f.renderbuffer),e.renderbufferStorage(36161,f.format,r,o),i.profile&&(f.stats.size=ve[f.format]*f.width*f.height),a)},a._reglType="renderbuffer",a._renderbuffer=f,i.profile&&(a.stats=f.stats),a.destroy=function(){f.decRef()},a},clear:function(){X(c).forEach(a)},restore:function(){X(c).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)}),e.bindRenderbuffer(36161,null)}}},ye=[];ye[6408]=4,ye[6407]=3;var we=[];we[5121]=1,we[5126]=4,we[36193]=2;var xe=["x","y","z","w"],_e="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ae={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ee={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ce={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ke={cw:2304,ccw:2305},Oe=new F(!1,!1,!1,function(){});return function(e){function t(){if(0===Q.length)_&&_.update(),ee=null;else{ee=V.next(t),l();for(var e=Q.length-1;0<=e;--e){var n=Q[e];n&&n(B,null,0)}m.flush(),_&&_.update()}}function n(){!ee&&0<Q.length&&(ee=V.next(t))}function r(){ee&&(V.cancel(t),ee=null)}function o(e){e.preventDefault(),r(),Z.forEach(function(e){e()})}function a(e){m.getError(),b.restore(),M.restore(),D.restore(),L.restore(),U.restore(),W.restore(),F.restore(),_&&_.restore(),$.procs.refresh(),n(),K.forEach(function(e){e()})}function u(e){function t(e,t){var n={},r={};return Object.keys(e).forEach(function(i){var o=e[i];if(H.isDynamic(o))r[i]=H.unbox(o,i);else{if(t&&Array.isArray(o))for(var a=0;a<o.length;++a)if(H.isDynamic(o[a]))return void(r[i]=H.unbox(o,i));n[i]=o}}),{dynamic:r,static:n}}var n=t(e.context||{},!0),r=t(e.uniforms||{},!0),i=t(e.attributes||{},!1);e=t(function(e){function t(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach(function(r){n[e+"."+r]=t[r]})}}var n=N({},e);return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),"vao"in e&&(n.vao=e.vao),n}(e),!1);var o={gpuTime:0,cpuTime:0,count:0},a=$.compile(e,i,r,n,o),u=a.draw,s=a.batch,f=a.scope,c=[];return N(function(e,t){var n;if("function"==typeof e)return f.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)f.call(this,null,t,n);else{if(!Array.isArray(e))return f.call(this,e,t,0);for(n=0;n<e.length;++n)f.call(this,e[n],t,n)}else if("number"==typeof e){if(0<e)return s.call(this,function(e){for(;c.length<e;)c.push(null);return c}(0|e),0|e)}else{if(!Array.isArray(e))return u.call(this,e);if(e.length)return s.call(this,e,e.length)}},{stats:o,destroy:function(){a.destroy()}})}function s(e,t){var n=0;$.procs.poll();var r=t.color;r&&(m.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in t&&(m.clearDepth(+t.depth),n|=256),"stencil"in t&&(m.clearStencil(0|t.stencil),n|=1024),m.clear(n)}function f(e){return Q.push(e),n(),{cancel:function(){var t=I(Q,e);Q[t]=function e(){var t=I(Q,e);Q[t]=Q[Q.length-1],--Q.length,0>=Q.length&&r()}}}}function c(){var e=X.viewport,t=X.scissor_box;e[0]=e[1]=t[0]=t[1]=0,B.viewportWidth=B.framebufferWidth=B.drawingBufferWidth=e[2]=t[2]=m.drawingBufferWidth,B.viewportHeight=B.framebufferHeight=B.drawingBufferHeight=e[3]=t[3]=m.drawingBufferHeight}function l(){B.tick+=1,B.time=g(),c(),$.procs.poll()}function p(){L.refresh(),c(),$.procs.refresh(),_&&_.update()}function g(){return(q()-A)/1e3}if(!(e=i(e)))return null;var m=e.gl,v=m.getContextAttributes();m.isContextLost();var b=function(e,t){function n(t){var n;t=t.toLowerCase();try{n=r[t]=e.getExtension(t)}catch(e){}return!!n}for(var r={},i=0;i<t.extensions.length;++i){var o=t.extensions[i];if(!n(o))return t.onDestroy(),t.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(r[e]&&!n(e))throw Error("(regl): error restoring extension "+e)})}}}(m,e);if(!b)return null;var y=function(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}(),w={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},x=b.extensions,_=function(e,t){function n(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function r(e,t,r){var i=a.pop()||new n;i.startQueryIndex=e,i.endQueryIndex=t,i.sum=0,i.stats=r,u.push(i)}if(!t.ext_disjoint_timer_query)return null;var i=[],o=[],a=[],u=[],s=[],f=[];return{beginQuery:function(e){var n=i.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,n),o.push(n),r(o.length-1,o.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:r,update:function(){var e,n;if(0!==(e=o.length)){f.length=Math.max(f.length,e+1),s.length=Math.max(s.length,e+1),s[0]=0;var r=f[0]=0;for(n=e=0;n<o.length;++n){var c=o[n];t.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(r+=t.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),i.push(c)):o[e++]=c,s[n+1]=r,f[n+1]=e}for(o.length=e,n=e=0;n<u.length;++n){var l=(r=u[n]).startQueryIndex;c=r.endQueryIndex,r.sum+=s[c]-s[l],l=f[l],(c=f[c])===l?(r.stats.gpuTime+=r.sum/1e6,a.push(r)):(r.startQueryIndex=l,r.endQueryIndex=c,u[e++]=r)}u.length=e}},getNumPendingQueries:function(){return o.length},clear:function(){i.push.apply(i,o);for(var e=0;e<i.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(i[e]);o.length=0,i.length=0},restore:function(){o.length=0,i.length=0}}}(0,x),A=q(),k=m.drawingBufferWidth,S=m.drawingBufferHeight,B={tick:0,time:0,viewportWidth:k,viewportHeight:S,framebufferWidth:k,framebufferHeight:S,drawingBufferWidth:k,drawingBufferHeight:S,pixelRatio:e.pixelRatio},z=Y(m,x),D=h(m,w,e,function(e){return F.destroyBuffer(e)}),F=O(m,x,z,w,D),P=d(m,x,D,w),M=T(m,y,w,e),L=E(m,x,z,function(){$.procs.poll()},B,w,e),U=be(m,x,0,w,e),W=C(m,x,z,L,U,w),$=R(m,y,x,z,D,P,0,W,{},F,M,{elements:null,primitive:4,count:-1,offset:0,instances:-1},B,_,e),X=(y=j(m,W,$.procs.poll,B),$.next),G=m.canvas,Q=[],Z=[],K=[],J=[e.onDestroy],ee=null;G&&(G.addEventListener("webglcontextlost",o,!1),G.addEventListener("webglcontextrestored",a,!1));var te=W.setFBO=u({framebuffer:H.define.call(null,1,"framebuffer")});return p(),v=N(u,{clear:function(e){if("framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;6>t;++t)te(N({framebuffer:e.framebuffer.faces[t]},e),s);else te(e,s);else s(0,e)},prop:H.define.bind(null,1),context:H.define.bind(null,2),this:H.define.bind(null,3),draw:u({}),buffer:function(e){return D.create(e,34962,!1,!1)},elements:function(e){return P.create(e,!1)},texture:L.create2D,cube:L.createCube,renderbuffer:U.create,framebuffer:W.create,framebufferCube:W.createCube,vao:F.createVAO,attributes:v,frame:f,on:function(e,t){var n;switch(e){case"frame":return f(t);case"lost":n=Z;break;case"restore":n=K;break;case"destroy":n=J}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t){n[e]=n[n.length-1],n.pop();break}}}},limits:z,hasExtension:function(e){return 0<=z.extensions.indexOf(e.toLowerCase())},read:y,destroy:function(){Q.length=0,r(),G&&(G.removeEventListener("webglcontextlost",o),G.removeEventListener("webglcontextrestored",a)),M.clear(),W.clear(),U.clear(),L.clear(),P.clear(),D.clear(),F.clear(),_&&_.clear(),J.forEach(function(e){e()})},_gl:m,_refresh:p,poll:function(){l(),_&&_.update()},now:g,stats:w}),e.onDone(null,v),v}},"object"==typeof n&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):r.createREGL=i()},{}],52:[function(e,t,n){"use strict";var r=e("../prototype/is");t.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!r(e)}},{"../prototype/is":55}],53:[function(e,t,n){"use strict";var r=e("../value/is"),i={object:!0,function:!0,undefined:!0};t.exports=function(e){return!!r(e)&&hasOwnProperty.call(i,typeof e)}},{"../value/is":56}],54:[function(e,t,n){"use strict";var r=e("../function/is"),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;t.exports=function(e){return!!r(e)&&!i.test(o.call(e))}},{"../function/is":52}],55:[function(e,t,n){"use strict";var r=e("../object/is");t.exports=function(e){if(!r(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},{"../object/is":53}],56:[function(e,t,n){"use strict";t.exports=function(e){return null!=e}},{}],57:[function(e,t,n){var r=e("regl"),i=e("./regl-turntable-camera"),o=e("./mesh-surface-2d"),a=(e("gl-mat4/create"),e("gl-mat4/multiply"),e("gl-mat4/lookAt"),e("controls-state")),u=e("controls-gui");e("insert-css")("\n.sketch-nav {\n  left: 0;\n  right: auto;\n  text-align: left;\n}\n");var s=u(a({tau:a.Slider(1,{min:0,max:2,step:.01,label:"τ"}),uRange:a.Slider(1,{min:0,max:2,step:.01,label:"uRange"}),vRange:a.Slider(1,{min:0,max:2,step:.01,label:"vRange"})}),{containerCSS:"position:absolute; top:0; right:10px; width:350px; z-index: 1"});var f=r({extensions:["OES_standard_derivatives"]}),c=i(f,{distance:8,theta:1.1*Math.PI,phi:.1*Math.PI,far:200,rotateAbountCenter:!0}),l=function(e,t){var n=o({},function(e,t,n){e[0]=.999999*t,e[1]=.999999*n},{resolution:[t,t],uDomain:[-Math.PI,Math.PI],vDomain:[.5*-Math.PI,.5*Math.PI]});return e({vert:"\n      precision highp float;\n      attribute vec2 uv;\n      uniform mat4 uProjectionView;\n      uniform float uTau;\n      uniform vec2 uRange;\n      varying vec3 vPosition, vNormal;\n      varying float vRadius;\n      varying vec2 vUV;\n\n      /*\n      vec4 quatMult(vec4 q1, vec4 q2) {\n        return vec4(\n          (q1.w * q2.x) + (q1.x * q2.w) + (q1.y * q2.z) - (q1.z * q2.y),\n          (q1.w * q2.y) - (q1.x * q2.z) + (q1.y * q2.w) + (q1.z * q2.x),\n          (q1.w * q2.z) + (q1.x * q2.y) - (q1.y * q2.x) + (q1.z * q2.w),\n          (q1.w * q2.w) - (q1.x * q2.x) - (q1.y * q2.y) - (q1.z * q2.z)\n        );\n      }\n      */\n\n      vec3 f(vec2 uv, float tau) {\n        float tx = tau * uv.x;\n        vec4 p = vec4(\n          cos(uv.y) * vec2(cos(uv.x), sin(uv.x)),\n          sin(uv.y) * vec2(cos(tx), sin(tx))\n        );\n\n        //p.xyz = mat3(uView) * p.xzy;\n\n        // Compute the stereographic projection\n        return p.yzx / (1.0 - p.w);\n      }\n\n      void main () {\n        vUV = uv;\n        vec2 uvScaled = uv * uRange;\n        vUV *= uRange;\n        vPosition = f(uvScaled, uTau);\n        vRadius = dot(vPosition, vPosition);\n\n        // Taint bad triangles to prevent them from passing through the origin as they cross from -Ininity to Infinity\n        if (vRadius > 400.0) vPosition /= 0.0;\n\n        // Compute the normal via numerical differentiation\n        const float dx = 5e-3;\n        vNormal = normalize(cross(\n          f(uvScaled + vec2(dx / uRange.x, 0), uTau) - vPosition,\n          f(uvScaled + vec2(0, dx / uRange.y), uTau) - vPosition\n        ));\n\n        gl_Position = uProjectionView * vec4(vPosition, 1);\n      }\n    ",frag:"\n      #extension GL_OES_standard_derivatives : enable\n      precision highp float;\n      varying vec3 vPosition, vNormal;\n      uniform vec3 uEye;\n      uniform bool uWire;\n      varying vec2 vUV;\n      varying float vRadius;\n      uniform float pixelRatio;\n\n      #define PI 3.141592653589\n\n      // From https://github.com/rreusser/glsl-solid-wireframe\n      float gridFactor (vec2 parameter, float width, float feather) {\n        float w1 = width - feather * 0.5;\n        vec2 d = fwidth(parameter);\n        vec2 looped = 0.5 - abs(mod(parameter, 1.0) - 0.5);\n        vec2 a2 = smoothstep(d * w1, d * (w1 + feather), looped);\n        return min(a2.x, a2.y);\n      }\n\n      void main () {\n        if (dot(vPosition, vPosition) > 100.0) discard;\n        // Shading technique adapted/simplified/customized from: https://observablehq.com/@rreusser/faking-transparency-for-3d-surfaces\n        vec3 normal = normalize(vNormal);\n        float vDotN = abs(dot(normal, normalize(vPosition - uEye)));\n        float vDotNGrad = fwidth(vDotN);\n        float cartoonEdge = smoothstep(0.75, 1.25, vDotN / (vDotNGrad * 3.0 * pixelRatio));\n        float sgn = gl_FrontFacing ? 1.0 : -1.0;\n        float grid = gridFactor(vUV * vec2(2.0, 2.0) * 4.0 / PI, 0.25 * pixelRatio, 1.0);\n        vec3 baseColor = gl_FrontFacing ? vec3(0.9, 0.2, 0.1) : vec3(0.1, 0.4, 0.8);\n        float vDotN4 = vDotN * vDotN;\n        vDotN *= vDotN4;\n        vDotN *= vDotN4;\n        float shade = mix(1.0, vDotN4, 0.6) + 0.2;\n\n        if (uWire) {\n          gl_FragColor.rgb = vec3(1);\n          gl_FragColor.a = mix(0.15, (1.0 - grid) * 0.055, cartoonEdge);\n        } else {\n          gl_FragColor = vec4(pow(\n            mix(baseColor, (0.5 + sgn * 0.5 * normal), 0.4) * cartoonEdge * mix(1.0, 0.6, 1.0 - grid) * shade,\n            vec3(0.454)),\n            1.0);\n        }\n      }\n    ",uniforms:{uRange:function(e,t){return[s.uRange,s.vRange]},uTau:e.prop("tau"),uWire:e.prop("wire"),pixelRatio:e.context("pixelRatio")},attributes:{uv:n.positions},depth:{enable:function(e,t){return!t.wire}},blend:{enable:function(e,t){return!!t.wire},func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:1,dstAlpha:1},equation:{rgb:"reverse subtract",alpha:"add"}},elements:n.cells})}(f,200);s.$onChanges(c.taint);f.frame(function(e){e.tick,e.time;c({rotationCenter:c.params.center},function(e){e.dirty&&(f.clear({color:[1,1,1,1]}),l([{wire:!1,tau:s.tau},{wire:!0,tau:s.tau}]))})})},{"./mesh-surface-2d":59,"./regl-turntable-camera":60,"controls-gui":7,"controls-state":8,"gl-mat4/create":25,"gl-mat4/lookAt":28,"gl-mat4/multiply":29,"insert-css":44,regl:51}],58:[function(e,t,n){"use strict";var r=e("gl-vec3/transformMat4"),i=e("normalized-interaction-events"),o=e("assert");t.exports=function(e,t){t=t||{};var n=e.element,u=null,s=null,f=null,c={defaultPrevented:!1};function l(){c.defaultPrevented=!1}function p(e){return e.defaultPrevented=c.defaultPrevented,e.preventDefault=function(){e.defaultPrevented=!0,c.defaultPrevented=!0},e}var h=[0,0,0],d=[0,0];return i(n).on("wheel",function(t){t.originalEvent.preventDefault(),e.zoom(t.x0,t.y0,Math.exp(-t.dy)-1)}).on("mousedown",function(e){l(),e=p(e),u&&u(e),e.originalEvent.preventDefault()}).on("mousemove",function(t){t=p(t),f&&f(t),t.defaultPrevented||t.active&&1===t.buttons&&(t.mods.alt?(e.zoom(t.x0,t.y0,Math.exp(t.dy)-1),t.originalEvent.preventDefault()):t.mods.shift?(e.pan(t.dx,t.dy),t.originalEvent.preventDefault()):t.mods.meta?(e.pivot(t.dx,t.dy),t.originalEvent.preventDefault()):(e.rotate(-t.dx*a,-t.dy*a),t.originalEvent.preventDefault()))}).on("mouseup",function(e){e.originalEvent.preventDefault(),l(),e=p(e),s&&s(e)}).on("touchstart",function(e){e.originalEvent.preventDefault(),e=p(e),u&&u(e)}).on("touchmove",function(t){t=p(t),f&&f(t),t.defaultPrevented||t.active&&(e.rotate(-t.dx*a,-t.dy*a),t.originalEvent.preventDefault())}).on("touchend",function(e){e.originalEvent.preventDefault(),l(),e=p(e),s&&s(e)}).on("pinchmove",function(n){n.active&&(function(e){h[0]=e.x,h[1]=e.y,h[2]=0,t.invViewportShift&&r(h,h,invViewportShift),d[0]=h[0],d[1]=h[1]}(n),e.zoom(d[0],d[1],1-n.zoomx),e.pan(n.dx,n.dy),n.originalEvent.preventDefault())}).on("pinchstart",function(e){e.originalEvent.preventDefault()}),u=t.onStart,f=t.onMove,s=t.onEnd,{setInteractions:function(e){o(e),u=e.onStart,s=e.onEnd,f=e.onMove}}};var a=.75*Math.PI},{assert:1,"gl-vec3/transformMat4":41,"normalized-interaction-events":48}],59:[function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t)}var i=[0,0,0];t.exports=function(e,t,n){var o,a,u,s,f,c=(n=n||{}).resolution||30,l=Array.isArray(n.resolution)?n.resolution[0]:c,p=Array.isArray(n.resolution)?n.resolution[1]:c,h=void 0===n.uDomain?[0,1]:n.uDomain,d=void 0===n.vDomain?[0,1]:n.vDomain;e=e||{};var g=l,m=p;n.uClosed||(g+=1),n.vClosed||(m+=1);var v=g*m,b=2*v,y=e.positions=e.positions||new Float32Array(b);r(y.length,b);var w=3*(l*p*2),x=e.cells=e.cells||new Int16Array(w);if(r(x.length,w),n.attributes){e.attributes={};var _={},A=Object.keys(n.attributes);for(o=0;o<A.length;o++){var E=A[o],C=[];(0,n.attributes[E])(C,h[0],d[0]),_[E]=C.length;var k=v*_[E];e.attributes[E]=e.attributes[E]||new Float32Array(k),r(e.attributes[E].length,k)}}for(o=0;o<g;o++)for(u=h[0]+(h[1]-h[0])*o/l,a=0;a<m;a++)if(s=d[0]+(d[1]-d[0])*a/p,f=2*(o+g*a),t(i,u,s),y[f+0]=i[0],y[f+1]=i[1],A)for(var O=0;O<A.length;O++){E=A[O];(0,n.attributes[E])(i,u,s);for(var T=(o+g*a)*_[E],j=e.attributes[E],S=0;S<_[E];S++)j[T+S]=i[S]}var B=0;for(o=0;o<l;o++){var z=o+1;for(n.uClosed&&(z%=l),a=0;a<p;a++){var D=a+1;n.vClosed&&(D%=p),x[B++]=o+g*a,x[B++]=z+g*a,x[B++]=z+g*D,x[B++]=o+g*a,x[B++]=z+g*D,x[B++]=o+g*D}}return e}},{}],60:[function(e,t,n){"use strict";var r=e("gl-mat4/create"),i=e("gl-mat4/multiply"),o=e("inertial-turntable-camera"),a=e("./interactions");Math.PI;t.exports=function(e,t){var n=e._gl.canvas;function u(){return n.clientWidth/n.clientHeight}n.addEventListener("wheel",function(e){return e.preventDefault()});var s=o(Object.assign({},{aspectRatio:u()},t||{})),f=r(),c=e({context:{projection:function(){return s.state.projection},view:function(){return s.state.view},viewInv:function(){return s.state.viewInv},eye:function(){return s.state.eye}},uniforms:{uProjectionView:function(e){return i(f,e.projection,e.view)},uProjection:e.context("projection"),uView:e.context("view"),uEye:e.context("eye")}});function l(e,t){t||(t=e,e={}),s.tick(e),c(function(){t(s.state,s.params)})}return l.taint=s.taint,l.resize=s.resize,l.tick=s.tick,l.setUniforms=c,l.rotate=s.rotate,l.pan=s.pan,l.pivot=s.pivot,l.zoom=s.zoom,Object.defineProperties(l,{state:{get:function(){return s.state},set:function(e){s.state=e}},params:{get:function(){return s.params},set:function(e){s.params=e}},element:{get:function(){return n}}}),window.addEventListener("resize",function(){s.resize(u())},!1),s.element=e._gl.canvas,a(s),l}},{"./interactions":58,"gl-mat4/create":25,"gl-mat4/multiply":29,"inertial-turntable-camera":43}]},{},[57]);